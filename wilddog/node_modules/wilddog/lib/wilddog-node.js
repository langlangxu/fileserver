(function(ns){var CLIENT_VERSION = "0.7.1";var NODE_CLIENT=1;ns.wrapper=function(good,wd){
var h,n=this;function p(a){return void 0!==a}function aa(){}function ba(a){a.Va=function(){return a.nd?a.nd:a.nd=new a}}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function da(a){return"array"==ca(a)}function q(a){return"string"==typeof a}function ea(a){return"number"==typeof a}function fa(a){return"function"==ca(a)}function ga(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ha(a,b,c){return a.call.apply(a.bind,arguments)}
function ia(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function r(a,b,c){r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia;return r.apply(null,arguments)}var ja=Date.now||function(){return+new Date};
function ka(a,b){function c(){}c.prototype=b.prototype;a.Be=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.ve=function(a,c,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[c].apply(a,g)}};var la={};function ma(a,b){this.type=na;this.source=oa;this.path=a;this.Yc=b}ma.prototype.Qb=function(){return this.path.j()?this:new ma(t(this.path),this.Yc)};ma.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Yc+")"};function pa(a,b){this.type=qa;this.source=a;this.path=b}pa.prototype.Qb=function(){return this.path.j()?new pa(this.source,v):new pa(this.source,t(this.path))};pa.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"};function ra(a,b,c){this.type=sa;this.source=a;this.path=b;this.Ba=c}ra.prototype.Qb=function(a){return this.path.j()?new ra(this.source,v,this.Ba.P(a)):new ra(this.source,t(this.path),this.Ba)};ra.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ba.toString()+")"};function w(){}w.prototype.R;w.prototype.J;w.prototype.ba;w.prototype.P;w.prototype.ja;w.prototype.Mc;w.prototype.U;w.prototype.M;w.prototype.wa;w.prototype.j;w.prototype.Ra;w.prototype.N;w.prototype.hash;w.prototype.lb;w.prototype.$;w.prototype.La;w.prototype.vb;function x(a,b){this.name=a;this.node=b}function ta(a,b){return new x(a,b)};function ua(a,b){return va(a.name,b.name)}function wa(a,b){return va(a,b)};function xa(a){this.g=a;this.f=null}xa.prototype.get=function(){var a=this.g.get(),b=ya(a);if(this.f)for(var c in this.f)b[c]-=this.f[c];this.f=a;return b};function za(a,b){this.ud={};this.sa=new xa(a);this.g=b;var c=1E4+2E4*Math.random();setTimeout(r(this.f,this),Math.floor(c))}za.prototype.f=function(){var a=this.sa.get(),b={},c=!1,d;for(d in a)0<a[d]&&y(this.ud,d)&&(b[d]=a[d],c=!0);c&&this.g.Vc(b);setTimeout(r(this.f,this),Math.floor(6E5*Math.random()))};function A(a,b){if(1==arguments.length){this.F=a.split("/");for(var c=0,d=0;d<this.F.length;d++)0<this.F[d].length&&(this.F[c]=this.F[d],c++);this.F.length=c;this.aa=0}else this.F=a,this.aa=b}function B(a,b){var c=C(a);if(null===c)return b;if(c===C(b))return B(t(a),t(b));throw Error("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")");}function C(a){return a.aa>=a.F.length?null:a.F[a.aa]}function Aa(a){return a.F.length-a.aa}
function t(a){var b=a.aa;b<a.F.length&&b++;return new A(a.F,b)}function Ba(a){return a.aa<a.F.length?a.F[a.F.length-1]:null}h=A.prototype;h.toString=function(){for(var a="",b=this.aa;b<this.F.length;b++)""!==this.F[b]&&(a+="/"+this.F[b]);return a||"/"};h.slice=function(a){return this.F.slice(this.aa+(a||0))};h.parent=function(){if(this.aa>=this.F.length)return null;for(var a=[],b=this.aa;b<this.F.length-1;b++)a.push(this.F[b]);return new A(a,0)};
h.C=function(a){for(var b=[],c=this.aa;c<this.F.length;c++)b.push(this.F[c]);if(a instanceof A)for(c=a.aa;c<a.F.length;c++)b.push(a.F[c]);else for(a=a.split("/"),c=0;c<a.length;c++)0<a[c].length&&b.push(a[c]);return new A(b,0)};h.j=function(){return this.aa>=this.F.length};h.$=function(a){if(Aa(this)!==Aa(a))return!1;for(var b=this.aa,c=a.aa;b<=this.F.length;b++,c++)if(this.F[b]!==a.F[c])return!1;return!0};
h.contains=function(a){var b=this.aa,c=a.aa;if(Aa(this)>Aa(a))return!1;for(;b<this.F.length;){if(this.F[b]!==a.F[c])return!1;++b;++c}return!0};var v=new A("");function Ca(a,b){this.g=a.slice();this.f=Math.max(1,this.g.length);this.m=b;for(var c=0;c<this.g.length;c++)this.f+=Da(this.g[c]);Ea(this)}Ca.prototype.push=function(a){0<this.g.length&&(this.f+=1);this.g.push(a);this.f+=Da(a);Ea(this)};Ca.prototype.pop=function(){var a=this.g.pop();this.f-=Da(a);0<this.g.length&&--this.f};
function Ea(a){if(768<a.f)throw Error(a.m+"has a key path longer than 768 bytes ("+a.f+").");if(32<a.g.length)throw Error(a.m+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Fa(a));}function Fa(a){return 0==a.g.length?"":"in property '"+a.g.join(".")+"'"};function Ga(a,b){return a&&"object"===typeof a?(D(".sv"in a,"Unexpected leaf node or priority contents"),b[a[".sv"]]):a}function Ha(a,b){var c=new Ia;Ja(a,new A(""),function(a,e){c.Bb(a,Ka(e,b))});return c}function Ka(a,b){var c=a.J().N(),c=Ga(c,b),d;if(a.R()){var e=Ga(a.va(),b);return e!==a.va()||c!==a.J().N()?new La(e,E(c)):a}d=a;c!==a.J().N()&&(d=d.ba(new La(c)));a.X(F,function(a,c){var e=Ka(c,b);e!==c&&(d=d.U(a,e))});return d};function Ma(a,b,c){this.f=a;this.ca=b;this.nb=c}function Na(a){return a.ca}function Oa(a,b){return a.ca&&!a.nb||a.f.wa(b)}Ma.prototype.u=function(){return this.f};function G(a,b,c,d){this.type=a;this.Ca=b;this.Ja=c;this.Sc=d;this.lc=void 0}function Pa(a){return new G(Qa,a)}var Qa="value";function Ra(){}Ra.prototype.ld=function(){return null};Ra.prototype.Kc=function(){return null};var Sa=new Ra;function Ta(a,b,c){this.yd=a;this.Da=b;this.ic=c}Ta.prototype.ld=function(a){var b=this.Da.L;if(Oa(b,a))return b.u().P(a);b=null!=this.ic?new Ma(this.ic,!0,!1):this.Da.I();return this.yd.Ia(a,b)};Ta.prototype.Kc=function(a,b,c){var d=null!=this.ic?this.ic:Ua(this.Da);a=this.yd.Ac(d,b,1,c,a);return 0===a.length?null:a[0]};function Va(){}Va.prototype.Wa;Va.prototype.dc;Va.prototype.Qa;Va.prototype.toString;function Wa(a,b,c,d){this.Gc=b;this.oc=c;this.lc=d;this.bc=a}Wa.prototype.Wa=function(){var a=this.oc.Ab();return"value"===this.bc?a.path:a.parent().path};Wa.prototype.dc=function(){return this.bc};Wa.prototype.Qa=function(){return this.Gc.Qa(this)};Wa.prototype.toString=function(){return this.Wa().toString()+":"+this.bc+":"+H(this.oc.hd())};function Xa(a,b,c){this.Gc=a;this.error=b;this.path=c}Xa.prototype.Wa=function(){return this.path};
Xa.prototype.dc=function(){return"cancel"};Xa.prototype.Qa=function(){return this.Gc.Qa(this)};Xa.prototype.toString=function(){return this.path.toString()+":cancel"};function Ya(){this.f=[]}function Za(a,b){for(var c=null,d=0;d<b.length;d++){var e=b[d],f=e.Wa();null===c||f.$(c.Wa())||(a.f.push(c),c=null);null===c&&(c=new $a(f));c.add(e)}c&&a.f.push(c)}function ab(a,b,c){Za(a,c);bb(a,function(a){return a.$(b)})}function cb(a,b,c){Za(a,c);bb(a,function(a){return a.contains(b)||b.contains(a)})}
function bb(a,b){for(var c=!0,d=0;d<a.f.length;d++){var e=a.f[d];if(e)if(e=e.Wa(),b(e)){for(var e=a.f[d],f=0;f<e.cc.length;f++){var g=e.cc[f];if(null!==g){e.cc[f]=null;var k=g.Qa();db&&eb("event: "+g.toString());fb(k)}}a.f[d]=null}else c=!1}c&&(a.f=[])}function $a(a){this.oa=a;this.cc=[]}$a.prototype.add=function(a){this.cc.push(a)};$a.prototype.Wa=function(){return this.oa};var gb={NETWORK_ERROR:"Unable to contact the Wilddog server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};function J(a){var b=Error(K(gb,a),a);b.code=a;return b};function hb(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(navigator.userAgent)}function ib(){return"undefined"!==typeof location&&/^file:\//.test(location.href)}
function jb(){if("undefined"===typeof navigator)return!1;var a=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){if((a=a.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<a.length)return 8<=parseFloat(a[1])}else if(-1<a.indexOf("Trident")&&(a=a.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<a.length)return 8<=parseFloat(a[1]);return!1};function y(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function K(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}function kb(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])}function lb(a){var b={};kb(a,function(a,d){b[a]=d});return b};function mb(a,b){this.committed=a;this.snapshot=b};function nb(a){this.Kb=a;this.kc="wilddog:"}nb.prototype.set=function(a,b){null==b?this.Kb.removeItem(this.kc+a):this.Kb.setItem(this.kc+a,H(b))};nb.prototype.get=function(a){a=this.Kb.getItem(this.kc+a);return null==a?null:ob(a)};nb.prototype.remove=function(a){this.Kb.removeItem(this.kc+a)};nb.prototype.toString=function(){return this.Kb.toString()};function pb(){this.Hb={}}pb.prototype.set=function(a,b){null==b?delete this.Hb[a]:this.Hb[a]=b};pb.prototype.get=function(a){return y(this.Hb,a)?this.Hb[a]:null};pb.prototype.remove=function(a){delete this.Hb[a]};function qb(a){try{if("undefined"!==typeof window&&"undefined"!==typeof window[a]){var b=window[a];b.setItem("wilddog:sentinel","cache");b.removeItem("wilddog:sentinel");return new nb(b)}}catch(c){}return new pb}var rb=qb("localStorage"),L=qb("sessionStorage");function sb(a,b,c,d,e){this.host=a.toLowerCase();this.domain=this.host.substr(this.host.indexOf(".")+1);this.bb=b;this.xb=c;this.jc=e||"";this.Aa=rb.get("host:"+a)||this.host;this.Oa=JSON.parse(L.get("failHosts"))||[]}function tb(a,b){null==b?(a.Aa=a.host,"s-"===a.Aa.substr(0,2)&&rb.remove("host:"+a.host)):b!==a.Aa&&0<b.indexOf(".wilddogio.com")&&(a.Aa=b,"s-"===a.Aa.substr(0,2)&&rb.set("host:"+a.host,a.Aa))}
sb.prototype.toString=function(){var a=(this.bb?"https://":"http://")+this.host;this.jc&&(a+="<"+this.jc+">");return a};var ub="auth.wilddog.com";function vb(a,b,c){this.Wb=a||{};this.rc=b||{};this.Ka=c||{};this.Wb.remember||(this.Wb.remember="default")}var wb=["remember","redirectTo"];function xb(a){var b={},c={};kb(a||{},function(a,e){0<=yb(wb,a)?b[a]=e:c[a]=e});return new vb(b,{},c)};function M(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);if(e)throw Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+".");}function N(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?");}return a=a+" failed: "+(d+" argument ")}
function O(a,b,c,d){if((!d||p(c))&&!fa(c))throw Error(N(a,b,d)+"must be a valid function.");}function zb(a,b,c){if(p(c)&&(!ga(c)||null===c))throw Error(N(a,b,!0)+"must be a valid context object.");};function Ab(a,b,c){this.da=c;this.m=a;this.o=b;this.g=0;this.f=null}Ab.prototype.get=function(){var a;0<this.g?(this.g--,a=this.f,this.f=a.next,a.next=null):a=this.m();return a};function Bb(a,b){a.o(b);a.g<a.da&&(a.g++,b.next=a.f,a.f=b)};function Cb(){this.g=-1};function Db(){this.g=-1;this.g=64;this.f=[];this.H=[];this.T=[];this.o=[];this.o[0]=128;for(var a=1;a<this.g;++a)this.o[a]=0;this.A=this.m=0;this.reset()}ka(Db,Cb);Db.prototype.reset=function(){this.f[0]=1732584193;this.f[1]=4023233417;this.f[2]=2562383102;this.f[3]=271733878;this.f[4]=3285377520;this.A=this.m=0};
function Eb(a,b,c){c||(c=0);var d=a.T;if(q(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.f[0];c=a.f[1];for(var g=a.f[2],k=a.f[3],l=a.f[4],m,e=0;80>e;e++)40>e?20>e?(f=k^c&(g^k),m=1518500249):(f=c^g^k,m=1859775393):60>e?(f=c&g|k&(c|g),m=2400959708):(f=c^g^k,m=3395469782),f=(b<<
5|b>>>27)+f+l+m+d[e]&4294967295,l=k,k=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.f[0]=a.f[0]+b&4294967295;a.f[1]=a.f[1]+c&4294967295;a.f[2]=a.f[2]+g&4294967295;a.f[3]=a.f[3]+k&4294967295;a.f[4]=a.f[4]+l&4294967295}
Db.prototype.update=function(a,b){if(null!=a){p(b)||(b=a.length);for(var c=b-this.g,d=0,e=this.H,f=this.m;d<b;){if(0==f)for(;d<=c;)Eb(this,a,d),d+=this.g;if(q(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,f==this.g){Eb(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,f==this.g){Eb(this,e);f=0;break}}this.m=f;this.A+=b}};function Fb(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Fb);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}ka(Fb,Error);Fb.prototype.name="CustomError";function Gb(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function Hb(){}
function Ib(a,b,c){if(null==b)c.push("null");else{if("object"==typeof b){if(da(b)){var d=b;b=d.length;c.push("[");for(var e="",f=0;f<b;f++)c.push(e),Ib(a,d[f],c),e=",";c.push("]");return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push("{");e="";for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(f=b[d],"function"!=typeof f&&(c.push(e),Jb(d,c),c.push(":"),Ib(a,f,c),e=","));c.push("}");return}}switch(typeof b){case "string":Jb(b,c);break;case "number":c.push(isFinite(b)&&
!isNaN(b)?String(b):"null");break;case "boolean":c.push(String(b));break;case "function":c.push("null");break;default:throw Error("Unknown type: "+typeof b);}}}var Kb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},Lb=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function Jb(a,b){b.push('"',a.replace(Lb,function(a){var b=Kb[a];b||(b="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1),Kb[a]=b);return b}),'"')};function Mb(a){var b=[];kb(a,function(a,d){da(d)?Nb(d,function(d){b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))}):b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))});return b.length?"&"+b.join("&"):""}function Ob(a){var b={};a=a.replace(/^\?/,"").split("&");Nb(a,function(a){a&&(a=a.split("="),b[a[0]]=a[1])});return b}function ob(a){return"undefined"!==typeof JSON&&p(JSON.parse)?JSON.parse(a):Gb(a)}
function H(a){if("undefined"!==typeof JSON&&p(JSON.stringify))a=JSON.stringify(a);else{var b=[];Ib(new Hb,a,b);a=b.join("")}return a}function Pb(){this.nc=P}Pb.prototype.u=function(a){return this.nc.ja(a)};Pb.prototype.toString=function(){return this.nc.toString()};function Qb(){var a=window.opener.frames,b;for(b=a.length-1;0<=b;b--)try{if(a[b].location.protocol===window.location.protocol&&a[b].location.host===window.location.host&&"__winchan_relay_frame"===a[b].name)return a[b]}catch(c){}return null}function Rb(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,!1)}function Sb(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener&&a.removeEventListener(b,c,!1)}
function Tb(a){/^https?:\/\//.test(a)||(a=window.location.href);var b=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(a);return b?b[1]:a}function Ub(a){var b="";try{a=a.replace("#","");var c=Ob(a);c&&y(c,"__wilddog_request_key")&&(b=K(c,"__wilddog_request_key"))}catch(d){}return b}function Vb(){var a=Wb(ub);return a.scheme+"://"+a.host+"/v1"}function Xb(a){return Vb()+"/"+a+"/auth/channel"};function Yb(a){a.callback_parameter||(a.callback_parameter="callback");this.f=a;window.__wilddog_auth_jsonp=window.__wilddog_auth_jsonp||{}}
Yb.prototype.open=function(a,b,c){function d(){c&&(c(J("REQUEST_INTERRUPTED")),c=null)}function e(){setTimeout(function(){window.__wilddog_auth_jsonp[f]=void 0;Zb(window.__wilddog_auth_jsonp)&&(window.__wilddog_auth_jsonp=void 0);try{var a=document.getElementById(f);a&&a.parentNode.removeChild(a)}catch(b){}},1);Sb(window,"beforeunload",d)}var f="fn"+(new Date).getTime()+Math.floor(99999*Math.random());b[this.f.callback_parameter]="__wilddog_auth_jsonp."+f;a+=(/\?/.test(a)?"":"?")+Mb(b);Rb(window,
"beforeunload",d);window.__wilddog_auth_jsonp[f]=function(a){c&&(c(null,a),c=null);e()};$b(f,a,c)};
function $b(a,b,c){setTimeout(function(){try{var d=document.createElement("script");d.type="text/javascript";d.id=a;d.async=!0;d.src=b;d.onerror=function(){var b=document.getElementById(a);null!==b&&b.parentNode.removeChild(b);c&&c(J("NETWORK_ERROR"))};var e,f=document.getElementsByTagName("head");f&&0!=f.length?e=f[0]:e=document.documentElement;e.appendChild(d)}catch(g){c&&c(J("NETWORK_ERROR"))}},0)}Yb.isAvailable=function(){return!NODE_CLIENT};Yb.prototype.kb=function(){return"json"};function ac(a){a.method||(a.method="GET");a.headers||(a.headers={});a.headers.content_type||(a.headers.content_type="application/json");a.headers.content_type=a.headers.content_type.toLowerCase();this.f=a}
ac.prototype.open=function(a,b,c){var d=Wb(a);a=this.f.method;var e;try{var f="http"===d.scheme?require("http"):require("https")}catch(l){}var g={Accept:"application/json;text/plain"};bc(g,this.f.headers);d={host:d.host.split(":")[0],port:d.port,path:d.zb,method:this.f.method.toUpperCase()};if("GET"===a)d.path+=(/\?/.test(d.path)?"":"?")+Mb(b),e=null;else{var k=this.f.headers.content_type;"application/json"===k&&(e=H(b));"application/x-www-form-urlencoded"===k&&(e=Mb(b));g["Content-Length"]=Buffer.byteLength(e,
"utf8")}d.headers=g;b=f.request(d,function(a){var b="";a.setEncoding("utf8");a.on("data",function(a){b+=a});a.on("end",function(){try{b=ob(b+"")}catch(a){}c&&(c(null,b),c=null)})});"GET"!==a&&b.write(e);b.on("error",function(a){a&&a.code&&("ENOTFOUND"===a.code||"ENETDOWN"===a.code)?c(J("NETWORK_ERROR")):c(J("SERVER_ERROR"));c=null});b.end()};ac.isAvailable=function(){return NODE_CLIENT};ac.prototype.kb=function(){return"json"};function cc(a){var b=this;this.Na=a;this.m="*";jb()?this.f=this.g=Qb():(this.f=window.opener,this.g=window);if(!b.f)throw"Unable to find relay frame";Rb(this.g,"message",r(this.A,this));Rb(this.g,"message",r(this.o,this));try{dc(this,{a:"ready"})}catch(c){Rb(this.f,"load",function(){dc(b,{a:"ready"})})}Rb(window,"unload",r(this.T,this))}function dc(a,b){b=H(b);jb()?a.f.doPost(b,a.m):a.f.postMessage(b,a.m)}
cc.prototype.A=function(a){var b=this,c;try{c=ob(a.data)}catch(d){}c&&"request"===c.a&&(Sb(window,"message",this.A),this.m=a.origin,this.Na&&setTimeout(function(){b.Na(b.m,c.d,function(a,c){b.H=!c;b.Na=void 0;dc(b,{a:"response",d:a,forceKeepWindowOpen:c})})},0))};cc.prototype.T=function(){try{Sb(this.g,"message",this.o)}catch(a){}this.Na&&(dc(this,{a:"error",d:"unknown closed window"}),this.Na=void 0);try{window.close()}catch(a){}};cc.prototype.o=function(a){if(this.H&&"die"===a.data)try{window.close()}catch(b){}};function ec(){this.f=fc()+fc()+fc()}ec.prototype.open=function(a,b){L.set("redirect_request_id",this.f);L.set("redirect_request_id",this.f);b.requestId=this.f;b.redirectTo=b.redirectTo||window.location.href;a+=(/\?/.test(a)?"":"?")+Mb(b);window.location=a};ec.isAvailable=function(){return!NODE_CLIENT&&!ib()&&!hb()};ec.prototype.kb=function(){return"redirect"};function gc(a){a.method||(a.method="GET");a.headers||(a.headers={});a.headers.content_type||(a.headers.content_type="application/json");a.headers.content_type=a.headers.content_type.toLowerCase();this.f=a}
gc.prototype.open=function(a,b,c){function d(){c&&(c(J("REQUEST_INTERRUPTED")),c=null)}var e=new XMLHttpRequest,f=this.f.method.toUpperCase(),g;Rb(window,"beforeunload",d);e.onreadystatechange=function(){if(c&&4===e.readyState){var a;if(200<=e.status&&300>e.status){try{a=ob(e.responseText)}catch(b){}c(null,a)}else 500<=e.status&&600>e.status?c(J("SERVER_ERROR")):c(J("NETWORK_ERROR"));c=null;Sb(window,"beforeunload",d)}};if("GET"===f)a+=(/\?/.test(a)?"":"?")+Mb(b),g=null;else{var k=this.f.headers.content_type;
"application/json"===k&&(g=H(b));"application/x-www-form-urlencoded"===k&&(g=Mb(b))}e.open(f,a,!0);a={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"};bc(a,this.f.headers);for(var l in a)e.setRequestHeader(l,a[l]);e.send(g)};gc.isAvailable=function(){return!NODE_CLIENT&&!!window.XMLHttpRequest&&(!("undefined"!==typeof navigator&&(navigator.userAgent.match(/MSIE/)||navigator.userAgent.match(/Trident/)))||jb())};gc.prototype.kb=function(){return"json"};function hc(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function ic(a,b){var c={},d;for(d in a)c[d]=b.call(void 0,a[d],d,a);return c}function jc(a,b){for(var c in a)if(!b.call(void 0,a[c],c,a))return!1;return!0}function kc(a){var b=0,c;for(c in a)b++;return b}function lc(a){for(var b in a)return b}function mc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function nc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function oc(a,b){return null!==a&&b in a}
function pc(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function qc(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function rc(a,b){var c=qc(a,b,void 0);return c&&a[c]}function Zb(a){for(var b in a)return!1;return!0}function ya(a){var b={},c;for(c in a)b[c]=a[c];return b}var sc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function bc(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<sc.length;f++)c=sc[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function fc(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ja()).toString(36)};var yb=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(q(a))return q(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Nb=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},tc=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=q(a)?a.split(""):a,k=0;k<d;k++)if(k in g){var l=g[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},uc=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=q(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},vc=Array.prototype.reduce?function(a,b,c,d){d&&(b=r(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;Nb(a,function(c,g){e=b.call(d,
e,c,g,a)});return e},wc=Array.prototype.every?function(a,b,c){return Array.prototype.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function xc(a,b){var c=yc(a,b,void 0);return 0>c?null:q(a)?a.charAt(c):a[c]}function yc(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function zc(a,b){var c=yb(a,b);0<=c&&Array.prototype.splice.call(a,c,1)}
function Ac(a,b){a.sort(b||Bc)}function Bc(a,b){return a>b?1:a<b?-1:0};function Cc(){this.f={}}Cc.prototype.get=function(){return ya(this.f)};var Dc={},Ec={};function Fc(a){a=a.toString();Dc[a]||(Dc[a]=new Cc);return Dc[a]}function Gc(a,b){var c=a.toString();Ec[c]||(Ec[c]=b());return Ec[c]};({}).qe;function Hc(a,b){this.g=a;this.f=b?b:Ic}h=Hc.prototype;h.Ea=function(a,b){return new Hc(this.g,this.f.Ea(a,b,this.g).Z(null,null,Jc,null,null))};h.remove=function(a){return new Hc(this.g,this.f.remove(a,this.g).Z(null,null,Jc,null,null))};h.get=function(a){for(var b,c=this.f;!c.j();){b=this.g(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return null};
function Kc(a,b){for(var c,d=a.f,e=null;!d.j();){c=a.g(b,d.key);if(0===c){if(d.left.j())return e?e.key:null;for(d=d.left;!d.right.j();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?");}h.j=function(){return this.f.j()};h.count=function(){return this.f.count()};h.Ob=function(){return this.f.Ob()};h.wb=function(){return this.f.wb()};h.ka=function(a){return this.f.ka(a)};
h.pb=function(a){return new Lc(this.f,null,this.g,!1,a)};h.qb=function(a,b){return new Lc(this.f,a,this.g,!1,b)};h.rb=function(a,b){return new Lc(this.f,a,this.g,!0,b)};h.md=function(a){return new Lc(this.f,null,this.g,!0,a)};function Lc(a,b,c,d,e){this.f=e||null;this.g=d;this.Fa=[];for(e=1;!a.j();)if(e=b?c(a.key,b):1,d&&(e*=-1),0>e)a=this.g?a.left:a.right;else if(0===e){this.Fa.push(a);break}else this.Fa.push(a),a=this.g?a.right:a.left}
function Mc(a){if(0===a.Fa.length)return null;var b=a.Fa.pop(),c;a.f?c=a.f(b.key,b.value):c={key:b.key,value:b.value};if(a.g)for(b=b.left;!b.j();)a.Fa.push(b),b=b.right;else for(b=b.right;!b.j();)a.Fa.push(b),b=b.left;return c}function Nc(a){if(0===a.Fa.length)return null;var b;b=a.Fa;b=b[b.length-1];return a.f?a.f(b.key,b.value):{key:b.key,value:b.value}}function Oc(a,b,c,d,e){this.key=a;this.value=b;this.color=null!=c?c:Pc;this.left=null!=d?d:Ic;this.right=null!=e?e:Ic}var Pc=!0,Jc=!1;h=Oc.prototype;
h.Z=function(a,b,c,d,e){return new Oc(null!=a?a:this.key,null!=b?b:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=e?e:this.right)};h.count=function(){return this.left.count()+1+this.right.count()};h.j=function(){return!1};h.ka=function(a){return this.left.ka(a)||a(this.key,this.value)||this.right.ka(a)};function Qc(a){return a.left.j()?a:Qc(a.left)}h.Ob=function(){return Qc(this).key};h.wb=function(){return this.right.j()?this.key:this.right.wb()};
h.Ea=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.Z(null,null,null,e.left.Ea(a,b,c),null):0===d?e.Z(null,b,null,null,null):e.Z(null,null,null,null,e.right.Ea(a,b,c));return Rc(e)};function Sc(a){if(a.left.j())return Ic;a.left.ga()||a.left.left.ga()||(a=Tc(a));a=a.Z(null,null,null,Sc(a.left),null);return Rc(a)}
h.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))c.left.j()||c.left.ga()||c.left.left.ga()||(c=Tc(c)),c=c.Z(null,null,null,c.left.remove(a,b),null);else{c.left.ga()&&(c=Uc(c));c.right.j()||c.right.ga()||c.right.left.ga()||(c=Vc(c),c.left.left.ga()&&(c=Uc(c),c=Vc(c)));if(0===b(a,c.key)){if(c.right.j())return Ic;d=Qc(c.right);c=c.Z(d.key,d.value,null,null,Sc(c.right))}c=c.Z(null,null,null,null,c.right.remove(a,b))}return Rc(c)};h.ga=function(){return this.color};
function Rc(a){a.right.ga()&&!a.left.ga()&&(a=Wc(a));a.left.ga()&&a.left.left.ga()&&(a=Uc(a));a.left.ga()&&a.right.ga()&&(a=Vc(a));return a}function Tc(a){a=Vc(a);a.right.left.ga()&&(a=a.Z(null,null,null,null,Uc(a.right)),a=Wc(a),a=Vc(a));return a}function Wc(a){return a.right.Z(null,null,a.color,a.Z(null,null,Pc,null,a.right.left),null)}function Uc(a){return a.left.Z(null,null,a.color,null,a.Z(null,null,Pc,a.left.right,null))}
function Vc(a){return a.Z(null,null,!a.color,a.left.Z(null,null,!a.left.color,null,null),a.right.Z(null,null,!a.right.color,null,null))}function Xc(){}h=Xc.prototype;h.Z=function(){return this};h.Ea=function(a,b){return new Oc(a,b,null)};h.remove=function(){return this};h.count=function(){return 0};h.j=function(){return!0};h.ka=function(){return!1};h.Ob=function(){return null};h.wb=function(){return null};h.ga=function(){return!1};var Ic=new Xc;function Yc(){this.g=this.f=null}var $c=new Ab(function(){return new Zc},function(a){a.reset()},100);Yc.prototype.add=function(a,b){var c=$c.get();c.set(a,b);this.g?this.g.next=c:this.f=c;this.g=c};Yc.prototype.remove=function(){var a=null;this.f&&(a=this.f,this.f=this.f.next,this.f||(this.g=null),a.next=null);return a};function Zc(){this.next=this.g=this.f=null}Zc.prototype.set=function(a,b){this.f=a;this.g=b;this.next=null};Zc.prototype.reset=function(){this.next=this.g=this.f=null};var ad;a:{var bd=n.navigator;if(bd){var cd=bd.userAgent;if(cd){ad=cd;break a}}ad=""};function dd(a){n.setTimeout(function(){throw a;},0)}var ed;
function fd(){var a=n.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&-1==ad.indexOf("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=r(function(a){if(("*"==d||a.origin==
d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==ad.indexOf("Trident")&&-1==ad.indexOf("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(p(c.next)){c=c.next;var a=c.Na;c.Na=null;a()}};return function(a){d.next={Na:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=
document.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){n.setTimeout(a,0)}};function gd(a,b){hd||id();jd||(hd(),jd=!0);kd.add(a,b)}var hd;function id(){if(n.Promise&&n.Promise.resolve){var a=n.Promise.resolve(void 0);hd=function(){a.then(ld)}}else hd=function(){var a=ld,c;!(c=!fa(n.setImmediate))&&(c=n.Window&&n.Window.prototype)&&(c=-1==ad.indexOf("Edge")&&n.Window.prototype.setImmediate==n.setImmediate);c?(ed||(ed=fd()),ed(a)):n.setImmediate(a)}}var jd=!1,kd=new Yc;function ld(){for(var a=null;a=kd.remove();){try{a.f.call(a.g)}catch(b){dd(b)}Bb($c,a)}jd=!1};function md(a,b){this.f=nd;this.T=void 0;this.o=this.g=this.m=null;this.A=this.H=!1;if(a!=aa)try{var c=this;a.call(b,function(a){od(c,pd,a)},function(a){if(!(a instanceof qd))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(b){}od(c,rd,a)})}catch(d){od(this,rd,d)}}var nd=0,pd=2,rd=3;function sd(){this.next=this.context=this.f=this.g=this.C=null;this.m=!1}sd.prototype.reset=function(){this.context=this.f=this.g=this.C=null;this.m=!1};
var td=new Ab(function(){return new sd},function(a){a.reset()},100);function ud(a,b,c){var d=td.get();d.g=a;d.f=b;d.context=c;return d}md.prototype.then=function(a,b,c){return vd(this,fa(a)?a:null,fa(b)?b:null,c)};md.prototype.then=md.prototype.then;md.prototype.$goog_Thenable=!0;h=md.prototype;h.ke=function(a,b){return vd(this,null,a,b)};h.cancel=function(a){this.f==nd&&gd(function(){var b=new qd(a);wd(this,b)},this)};
function wd(a,b){if(a.f==nd)if(a.m){var c=a.m;if(c.g){for(var d=0,e=null,f=null,g=c.g;g&&(g.m||(d++,g.C==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.f==nd&&1==d?wd(c,b):(f?(d=f,d.next==c.o&&(c.o=d),d.next=d.next.next):xd(c),yd(c,e,rd,b)))}a.m=null}else od(a,rd,b)}function zd(a,b){a.g||a.f!=pd&&a.f!=rd||Ad(a);a.o?a.o.next=b:a.g=b;a.o=b}
function vd(a,b,c,d){var e=ud(null,null,null);e.C=new md(function(a,g){e.g=b?function(c){try{var e=b.call(d,c);a(e)}catch(m){g(m)}}:a;e.f=c?function(b){try{var e=c.call(d,b);!p(e)&&b instanceof qd?g(b):a(e)}catch(m){g(m)}}:g});e.C.m=a;zd(a,e);return e.C}h.le=function(a){this.f=nd;od(this,pd,a)};h.me=function(a){this.f=nd;od(this,rd,a)};
function od(a,b,c){if(a.f==nd){a===c&&(b=rd,c=new TypeError("Promise cannot resolve to itself"));a.f=1;var d;a:{var e=c,f=a.le,g=a.me;if(e instanceof md)zd(e,ud(f||aa,g||null,a)),d=!0;else{var k;if(e)try{k=!!e.$goog_Thenable}catch(m){k=!1}else k=!1;if(k)e.then(f,g,a),d=!0;else{if(ga(e))try{var l=e.then;if(fa(l)){Bd(e,l,f,g,a);d=!0;break a}}catch(m){g.call(a,m);d=!0;break a}d=!1}}}d||(a.T=c,a.f=b,a.m=null,Ad(a),b!=rd||c instanceof qd||Cd(a,c))}}
function Bd(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function g(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,g,f)}catch(l){f(l)}}function Ad(a){a.H||(a.H=!0,gd(a.Rd,a))}function xd(a){var b=null;a.g&&(b=a.g,a.g=b.next,b.next=null);a.g||(a.o=null);return b}h.Rd=function(){for(var a=null;a=xd(this);)yd(this,a,this.f,this.T);this.H=!1};
function yd(a,b,c,d){if(c==rd&&b.f&&!b.m)for(;a&&a.A;a=a.m)a.A=!1;if(b.C)b.C.m=null,Dd(b,c,d);else try{b.m?b.g.call(b.context):Dd(b,c,d)}catch(e){Ed.call(null,e)}Bb(td,b)}function Dd(a,b,c){b==pd?a.g.call(a.context,c):a.f&&a.f.call(a.context,c)}function Cd(a,b){a.A=!0;gd(function(){a.A&&Ed.call(null,b)})}var Ed=dd;function qd(a){Fb.call(this,a)}ka(qd,Fb);qd.prototype.name="cancel";var Fd=Promise||n.Promise||md;md.prototype["catch"]=md.prototype.ke;function Q(){var a=this;this.g=this.m=null;this.f=new Fd(function(b,c){a.m=b;a.g=c})}function R(a,b){return function(c,d){c?a.g(c):a.m(d);fa(b)&&(Gd(a.f),1===b.length?b(c):b(c,d))}}function Gd(a){a.then(void 0,aa)};var Hd=null,Id=null;function Jd(a){var b="";Kd(a,function(a){b+=String.fromCharCode(a)});return b}function Kd(a,b){function c(b){for(;d<a.length;){var c=a.charAt(d++),e=Id[c];if(null!=e)return e;if(!/^[\s\xa0]*$/.test(c))throw Error("Unknown base64 encoding at char: "+c);}return b}Ld();for(var d=0;;){var e=c(-1),f=c(0),g=c(64),k=c(64);if(64===k&&-1===e)break;b(e<<2|f>>4);64!=g&&(b(f<<4&240|g>>2),64!=k&&b(g<<6&192|k))}}
function Ld(){if(!Hd){Hd={};Id={};for(var a=0;65>a;a++)Hd[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),Id[Hd[a]]=a,62<=a&&(Id["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)]=a)}};var Md=function(){var a=1;return function(){return a++}}();function D(a,b){if(!a)throw Nd(b);}function Nd(a){return Error("Wilddog ("+Od+") INTERNAL ASSERT FAILED: "+a)}function Qd(a){try{return NODE_CLIENT?(new Buffer(a,"base64")).toString("utf8"):"undefined"!==typeof atob?atob(a):Jd(a)}catch(b){eb("base64Decode failed: ",b)}return null}
function Rd(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);55296<=e&&56319>=e&&(e=e-55296,d++,D(d<a.length,"Surrogate pair missing trail surrogate."),e=65536+(e<<10)+(a.charCodeAt(d)-56320));128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(65536>e?b[c++]=e>>12|224:(b[c++]=e>>18|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}a=new Db;a.update(b);b=[];d=8*a.A;56>a.m?a.update(a.o,56-a.m):a.update(a.o,a.g-(a.m-56));for(c=a.g-1;56<=c;c--)a.H[c]=d&255,d/=256;Eb(a,a.H);for(c=d=0;5>c;c++)for(e=
24;0<=e;e-=8)b[d]=a.f[c]>>e&255,++d;Ld();a=Hd;c=[];for(d=0;d<b.length;d+=3){var f=b[d],g=(e=d+1<b.length)?b[d+1]:0,k=d+2<b.length,l=k?b[d+2]:0,m=f>>2,f=(f&3)<<4|g>>4,g=(g&15)<<2|l>>6,l=l&63;k||(l=64,e||(g=64));c.push(a[m],a[f],a[g],a[l])}return c.join("")}
function Sd(a){for(var b="",c=0;c<arguments.length;c++)var d=arguments[c],e=ca(d),b="array"==e||"object"==e&&"number"==typeof d.length?b+Sd.apply(null,arguments[c]):"object"===typeof arguments[c]?b+H(arguments[c]):b+arguments[c],b=b+" ";return b}var db=null,Td=!0;function eb(a){!0===Td&&(Td=!1,null===db&&!0===L.get("logging_enabled")&&Ud(!0));if(db){var b=Sd.apply(null,arguments);db(b)}}function Vd(a){return function(){eb(a,arguments)}}
function Wd(a){if("undefined"!==typeof console){var b="WILDDOG INTERNAL ERROR: "+Sd.apply(null,arguments);"undefined"!==typeof console.error?console.error(b):console.log(b)}}function Xd(a){var b=Sd.apply(null,arguments);throw Error("WILDDOG FATAL ERROR: "+b);}function S(a){if("undefined"!==typeof console){var b="WILDDOG WARNING: "+Sd.apply(null,arguments);"undefined"!==typeof console.warn?console.warn(b):console.log(b)}}
function Wb(a){var b="",c="",d="",e="",f=!0,g="https",k=443;if(q(a)){var l=a.indexOf("//");0<=l&&(g=a.substring(0,l-1),a=a.substring(l+2));l=a.indexOf("/");-1===l&&(l=a.length);b=a.substring(0,l);e="";a=a.substring(l).split("/");for(l=0;l<a.length;l++)if(0<a[l].length){var m=a[l];try{m=decodeURIComponent(m.replace(/\+/g," "))}catch(u){}e+="/"+m}a=b.split(".");3===a.length?(c=a[1],d=a[0].toLowerCase()):2===a.length&&(c=a[0]);l=b.indexOf(":");0<=l&&(f="https"===g||"wss"===g,k=b.substring(l+1),isFinite(k)&&
(k=String(k)),k=q(k)?/^\s*-?0x/i.test(k)?parseInt(k,16):parseInt(k,10):NaN)}return{host:b,port:k,domain:c,je:d,bb:f,scheme:g,zb:e}}function Yd(a){return ea(a)&&(a!=a||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)}function va(a,b){if(a===b)return 0;if("[MIN_NAME]"===a||"[MAX_NAME]"===b)return-1;if("[MIN_NAME]"===b||"[MAX_NAME]"===a)return 1;var c=Zd(a),d=Zd(b);return null!==c?null!==d?0==c-d?a.length-b.length:c-d:-1:null!==d?1:a<b?-1:1}
function $d(a){if("object"!==typeof a||null===a)return H(a);var b=[],c;for(c in a)b.push(c);b.sort();c="{";for(var d=0;d<b.length;d++)0!==d&&(c+=","),c+=H(b[d]),c+=":",c+=$d(a[b[d]]);return c+"}"}function ae(a,b){if(da(a))for(var c=0;c<a.length;++c)b(c,a[c]);else hc(a,b)}
function be(a){D(!Yd(a),"Invalid JSON number");var b,c,d,e;0===a?(d=c=0,b=-Infinity===1/a?1:0):(b=0>a,a=Math.abs(a),a>=Math.pow(2,-1022)?(d=Math.min(Math.floor(Math.log(a)/Math.LN2),1023),c=d+1023,d=Math.round(a*Math.pow(2,52-d)-Math.pow(2,52))):(c=0,d=Math.round(a/Math.pow(2,-1074))));e=[];for(a=52;a;--a)e.push(d%2?1:0),d=Math.floor(d/2);for(a=11;a;--a)e.push(c%2?1:0),c=Math.floor(c/2);e.push(b?1:0);e.reverse();b=e.join("");c="";for(a=0;64>a;a+=8)d=parseInt(b.substr(a,8),2).toString(16),1===d.length&&
(d="0"+d),c+=d;return c.toLowerCase()}var ce=/^-?\d{1,10}$/;function Zd(a){return ce.test(a)&&(a=Number(a),-2147483648<=a&&2147483647>=a)?a:null}function fb(a){try{a()}catch(b){setTimeout(function(){S("Exception was thrown by user callback.",b.stack||"");throw b;},Math.floor(0))}}function T(a,b){if(fa(a)){var c=Array.prototype.slice.call(arguments,1).slice();fb(function(){a.apply(null,c)})}};function de(a,b,c){this.type=ee;this.source=a;this.path=b;this.children=c}de.prototype.Qb=function(a){if(this.path.j())return a=this.children.subtree(new A(a)),a.j()?null:a.value?new ra(this.source,v,a.value):new de(this.source,v,a);D(C(this.path)===a,"Can't get a merge for a child not on the path of the operation");return new de(this.source,t(this.path),this.children)};de.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};var sa=0,ee=1,na=2,qa=3;function fe(){}fe.prototype.source;fe.prototype.type;fe.prototype.path;function ge(a,b,c,d){this.Ic=a;this.kd=b;this.ab=c;this.cd=d;D(!d||b,"Tagged queries must be from server.")}var oa=new ge(!0,!1,null,!1),he=new ge(!1,!0,null,!1);ge.prototype.toString=function(){return this.Ic?"user":this.cd?"server(queryID="+this.ab+")":"server"};function ie(){}ie.f;var je={};function ke(a){return r(a.compare,a)}ie.prototype.gc=function(a,b){return 0!==this.compare(new x("[MIN_NAME]",a),new x("[MIN_NAME]",b))};ie.prototype.Pb=function(){return le};function me(a){this.f=a}ka(me,ie);h=me.prototype;h.Lb=function(a){return!a.P(this.f).j()};h.compare=function(a,b){var c=a.node.P(this.f),d=b.node.P(this.f),c=c.lb(d);return 0===c?va(a.name,b.name):c};h.Mb=function(a,b){var c=E(a),c=P.U(this.f,c);return new x(b,c)};
h.Nb=function(){var a=P.U(this.f,ne);return new x("[MAX_NAME]",a)};h.toString=function(){return this.f};function oe(){}ka(oe,ie);h=oe.prototype;h.compare=function(a,b){var c=a.node.J(),d=b.node.J(),c=c.lb(d);return 0===c?va(a.name,b.name):c};h.Lb=function(a){return!a.J().j()};h.gc=function(a,b){return!a.J().$(b.J())};h.Pb=function(){return le};h.Nb=function(){return new x("[MAX_NAME]",new La("[PRIORITY-POST]",ne))};h.Mb=function(a,b){var c=E(a);return new x(b,new La("[PRIORITY-POST]",c))};
h.toString=function(){return".priority"};var F=new oe;function pe(){}ka(pe,ie);h=pe.prototype;h.compare=function(a,b){return va(a.name,b.name)};h.Lb=function(){throw Nd("KeyIndex.isDefinedOn not expected to be called.");};h.gc=function(){return!1};h.Pb=function(){return le};h.Nb=function(){return new x("[MAX_NAME]",P)};h.Mb=function(a){D(q(a),"KeyIndex indexValue must always be a string.");return new x(a,P)};h.toString=function(){return".key"};var qe=new pe;function re(){}ka(re,ie);h=re.prototype;
h.compare=function(a,b){var c=a.node.lb(b.node);return 0===c?va(a.name,b.name):c};h.Lb=function(){return!0};h.gc=function(a,b){return!a.$(b)};h.Pb=function(){return le};h.Nb=function(){return se};h.Mb=function(a,b){var c=E(a);return new x(b,c)};h.toString=function(){return".value"};var te=new re;function ue(a,b){this.f=a;this.tb=b}ue.prototype.get=function(a){var b=K(this.f,a);if(!b)throw Error("No index defined for "+a);return b===je?null:b};function ve(a,b,c){var d=ic(a.f,function(d,f){var g=K(a.tb,f);D(g,"Missing index implementation for "+f);if(d===je){if(g.Lb(b.node)){for(var k=[],l=c.pb(ta),m=Mc(l);m;)m.name!=b.name&&k.push(m),m=Mc(l);k.push(b);return we(k,ke(g))}return je}g=c.get(b.name);k=d;g&&(k=k.remove(new x(b.name,g)));return k.Ea(b,b.node)});return new ue(d,a.tb)}
function xe(a,b,c){var d=ic(a.f,function(a){if(a===je)return a;var d=c.get(b.name);return d?a.remove(new x(b.name,d)):a});return new ue(d,a.tb)}var ye=new ue({".priority":je},{".priority":F});function La(a,b){this.K=a;D(p(this.K)&&null!==this.K,"LeafNode shouldn't be created with null/undefined value.");this.fa=b||P;ze(this.fa);this.f=null}h=La.prototype;h.R=function(){return!0};h.J=function(){return this.fa};h.ba=function(a){return new La(this.K,a)};h.P=function(a){return".priority"===a?this.fa:P};h.ja=function(a){return a.j()?this:".priority"===C(a)?this.fa:P};h.wa=function(){return!1};h.Mc=function(){return null};
h.U=function(a,b){return".priority"===a?this.ba(b):b.j()&&".priority"!==a?this:P.U(a,b).ba(this.fa)};h.M=function(a,b){var c=C(a);if(null===c)return b;if(b.j()&&".priority"!==c)return this;D(".priority"!==c||1===Aa(a),".priority must be the last token in a path");return this.U(c,P.M(t(a),b))};h.j=function(){return!1};h.Ra=function(){return 0};h.N=function(a){return a&&!this.J().j()?{".value":this.va(),".priority":this.J().N()}:this.va()};
h.hash=function(){if(null===this.f){var a="";this.fa.j()||(a+="priority:"+Ae(this.fa.N())+":");var b=typeof this.K,a=a+(b+":"),a="number"===b?a+be(this.K):a+this.K;this.f=Rd(a)}return this.f};h.va=function(){return this.K};h.lb=function(a){if(a===P)return 1;if(a instanceof Be)return-1;D(a.R(),"Unknown node type");var b=typeof a.K,c=typeof this.K,d=yb(Ce,b),e=yb(Ce,c);D(0<=d,"Unknown leaf type: "+b);D(0<=e,"Unknown leaf type: "+c);return d===e?"object"===c?0:this.K<a.K?-1:this.K===a.K?0:1:e-d};
var Ce=["object","boolean","number","string"];La.prototype.La=function(){return this};La.prototype.vb=function(){return!0};La.prototype.$=function(a){return a===this?!0:a.R()?this.K===a.K&&this.fa.$(a.fa):!1};La.prototype.toString=function(){return H(this.N(!0))};function Be(a,b,c){this.D=a;(this.fa=b)&&ze(this.fa);a.j()&&D(!this.fa||this.fa.j(),"An empty node cannot have a priority");this.f=c;this.g=null}h=Be.prototype;h.R=function(){return!1};h.J=function(){return this.fa||P};h.ba=function(a){return this.D.j()?this:new Be(this.D,a,this.f)};h.P=function(a){if(".priority"===a)return this.J();a=this.D.get(a);return null===a?P:a};h.ja=function(a){var b=C(a);return null===b?this:this.P(b).ja(t(a))};h.wa=function(a){return null!==this.D.get(a)};
h.U=function(a,b){D(b,"We should always be passing snapshot nodes");if(".priority"===a)return this.ba(b);var c=new x(a,b),d,e;b.j()?(d=this.D.remove(a),c=xe(this.f,c,this.D)):(d=this.D.Ea(a,b),c=ve(this.f,c,this.D));e=d.j()?P:this.fa;return new Be(d,e,c)};h.M=function(a,b){var c=C(a);if(null===c)return b;D(".priority"!==C(a)||1===Aa(a),".priority must be the last token in a path");var d=this.P(c).M(t(a),b);return this.U(c,d)};h.j=function(){return this.D.j()};h.Ra=function(){return this.D.count()};
var De=/^(0|[1-9]\d*)$/;h=Be.prototype;h.N=function(a){if(this.j())return null;var b={},c=0,d=0,e=!0;this.X(F,function(f,g){b[f]=g.N(a);c++;e&&De.test(f)?d=Math.max(d,Number(f)):e=!1});if(!a&&e&&d<2*c){var f=[],g;for(g in b)f[g]=b[g];return f}a&&!this.J().j()&&(b[".priority"]=this.J().N());return b};h.hash=function(){if(null===this.g){var a="";this.J().j()||(a+="priority:"+Ae(this.J().N())+":");this.X(F,function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});this.g=""===a?"":Rd(a)}return this.g};
h.Mc=function(a,b,c){return(c=Ee(this,c))?(a=Kc(c,new x(a,b)))?a.name:null:Kc(this.D,a)};function Fe(a,b){var c;c=(c=Ee(a,b))?(c=c.Ob())&&c.name:a.D.Ob();return c?new x(c,a.D.get(c)):null}function Ge(a,b){var c;c=(c=Ee(a,b))?(c=c.wb())&&c.name:a.D.wb();return c?new x(c,a.D.get(c)):null}h.X=function(a,b){var c=Ee(this,a);return c?c.ka(function(a){return b(a.name,a.node)}):this.D.ka(b)};h.pb=function(a){return this.qb(a.Pb(),a)};
h.qb=function(a,b){var c=Ee(this,b);if(c)return c.qb(a,function(a){return a});for(var c=this.D.qb(a.name,ta),d=Nc(c);null!=d&&0>b.compare(d,a);)Mc(c),d=Nc(c);return c};h.md=function(a){return this.rb(a.Nb(),a)};h.rb=function(a,b){var c=Ee(this,b);if(c)return c.rb(a,function(a){return a});for(var c=this.D.rb(a.name,ta),d=Nc(c);null!=d&&0<b.compare(d,a);)Mc(c),d=Nc(c);return c};h.lb=function(a){return this.j()?a.j()?0:-1:a.R()||a.j()?1:a===ne?-1:0};
h.La=function(a){if(a===qe||pc(this.f.tb,a.toString()))return this;var b=this.f,c=this.D;D(a!==qe,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var d=[],e=!1,c=c.pb(ta),f=Mc(c);f;)e=e||a.Lb(f.node),d.push(f),f=Mc(c);var g;e?g=we(d,ke(a)):g=je;d=a.toString();e=ya(b.tb);e[d]=a;a=ya(b.f);a[d]=g;return new Be(this.D,this.fa,new ue(a,e))};h.vb=function(a){return a===qe||pc(this.f.tb,a.toString())};
h.$=function(a){if(a===this)return!0;if(a.R())return!1;if(this.J().$(a.J())&&this.D.count()===a.D.count()){var b=this.pb(F);a=a.pb(F);for(var c=Mc(b),d=Mc(a);c&&d;){if(c.name!==d.name||!c.node.$(d.node))return!1;c=Mc(b);d=Mc(a)}return null===c&&null===d}return!1};function Ee(a,b){return b===qe?null:a.f.get(b.toString())}h.toString=function(){return H(this.N(!0))};function E(a,b){if(null===a)return P;var c=null;"object"===typeof a&&".priority"in a?c=a[".priority"]:"undefined"!==typeof b&&(c=b);D(null===c||"string"===typeof c||"number"===typeof c||"object"===typeof c&&".sv"in c,"Invalid priority type found: "+typeof c);"object"===typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]);if("object"!==typeof a||".sv"in a)return new La(a,E(c));if(a instanceof Array){var d=P,e=a;hc(e,function(a,b){if(y(e,b)&&"."!==b.substring(0,1)){var c=E(a);if(c.R()||!c.j())d=
d.U(b,c)}});return d.ba(E(c))}var f=[],g=!1,k=a;kb(k,function(a){if("string"!==typeof a||"."!==a.substring(0,1)){var b=E(k[a]);b.j()||(g=g||!b.J().j(),f.push(new x(a,b)))}});if(0==f.length)return P;var l=we(f,ua,function(a){return a.name},wa);if(g){var m=we(f,ke(F));return new Be(l,E(c),new ue({".priority":m},{".priority":F}))}return new Be(l,E(c),ye)}var He=Math.log(2);
function Ie(a){this.count=parseInt(Math.log(a+1)/He,10);this.gd=this.count-1;this.Nd=a+1&parseInt(Array(this.count+1).join("1"),2)}function Je(a){var b=!(a.Nd&1<<a.gd);a.gd--;return b}
function we(a,b,c,d){function e(b,d){var f=d-b;if(0==f)return null;if(1==f){var m=a[b],u=c?c(m):m;return new Oc(u,m.node,Jc,null,null)}var m=parseInt(f/2,10)+b,f=e(b,m),z=e(m+1,d),m=a[m],u=c?c(m):m;return new Oc(u,m.node,Jc,f,z)}a.sort(b);var f=function(b){function d(b,g){var k=u-b,z=u;u-=b;var z=e(k+1,z),k=a[k],I=c?c(k):k,z=new Oc(I,k.node,g,null,z);f?f.left=z:m=z;f=z}for(var f=null,m=null,u=a.length,z=0;z<b.count;++z){var I=Je(b),Pd=Math.pow(2,b.count-(z+1));I?d(Pd,Jc):(d(Pd,Jc),d(Pd,Pc))}return m}(new Ie(a.length));
return null!==f?new Hc(d||b,f):new Hc(d||b)}function Ae(a){return"number"===typeof a?"number:"+be(a):"string:"+a}function ze(a){if(a.R()){var b=a.N();D("string"===typeof b||"number"===typeof b||"object"===typeof b&&y(b,".sv"),"Priority must be a string or number.")}else D(a===ne||a.j(),"priority of unexpected type.");D(a===ne||a.J().j(),"Priority nodes can't have a priority of their own.")}var P=new Be(new Hc(wa),null,ye);function Ke(){Be.call(this,new Hc(wa),P,ye)}ka(Ke,Be);h=Ke.prototype;
h.lb=function(a){return a===this?0:1};h.$=function(a){return a===this};h.J=function(){return this};h.P=function(){return P};h.j=function(){return!1};var ne=new Ke,le=new x("[MIN_NAME]",P),se=new x("[MAX_NAME]",ne);function Le(){this.set={}}h=Le.prototype;h.add=function(a,b){this.set[a]=null!==b?b:!0};h.contains=function(a){return y(this.set,a)};h.get=function(a){return this.contains(a)?this.set[a]:void 0};h.remove=function(a){delete this.set[a]};h.j=function(){return Zb(this.set)};h.count=function(){return kc(this.set)};function Me(a,b){hc(a.set,function(a,d){b(d,a)})};function Ia(){this.D=this.K=null}Ia.prototype.find=function(a){if(null!=this.K)return this.K.ja(a);if(a.j()||null==this.D)return null;var b=C(a);a=t(a);return this.D.contains(b)?this.D.get(b).find(a):null};Ia.prototype.Bb=function(a,b){if(a.j())this.K=b,this.D=null;else if(null!==this.K)this.K=this.K.M(a,b);else{null==this.D&&(this.D=new Le);var c=C(a);this.D.contains(c)||this.D.add(c,new Ia);c=this.D.get(c);a=t(a);c.Bb(a,b)}};
function Ne(a,b){if(b.j())return a.K=null,a.D=null,!0;if(null!==a.K){if(a.K.R())return!1;var c=a.K;a.K=null;c.X(F,function(b,c){a.Bb(new A(b),c)});return Ne(a,b)}return null!==a.D?(c=C(b),b=t(b),a.D.contains(c)&&Ne(a.D.get(c),b)&&a.D.remove(c),a.D.j()?(a.D=null,!0):!1):!0}function Ja(a,b,c){null!==a.K?c(b,a.K):a.X(function(a,e){var f=new A(b.toString()+"/"+a);Ja(e,f,c)})}Ia.prototype.X=function(a){null!==this.D&&Me(this.D,function(b,c){a(b,c)})};function Oe(a){D(da(a)&&0<a.length,"Requires a non-empty array");this.sa=a;this.m={}}Oe.prototype.A=function(a,b){for(var c=this.m[a]||[],d=0;d<c.length;d++)c[d].Jb.apply(c[d].context,Array.prototype.slice.call(arguments,1))};Oe.prototype.$a=function(a,b,c){Pe(this,a);this.m[a]=this.m[a]||[];this.m[a].push({Jb:b,context:c});(a=this.Lc(a))&&b.apply(c,a)};Oe.prototype.yb=function(a,b,c){Pe(this,a);a=this.m[a]||[];for(var d=0;d<a.length;d++)if(a[d].Jb===b&&(!c||c===a[d].context)){a.splice(d,1);break}};
function Pe(a,b){D(xc(a.sa,function(a){return a===b}),"Unknown event: "+b)};function Qe(a,b){this.value=a;this.children=b||Re}var Re=new Hc(function(a,b){return a===b?0:a<b?-1:1});function Se(a){var b=Te;hc(a,function(a,d){b=b.set(new A(d),a)});return b}h=Qe.prototype;h.j=function(){return null===this.value&&this.children.j()};function Ue(a,b,c){if(null!=a.value&&c(a.value))return{path:v,value:a.value};if(b.j())return null;var d=C(b);a=a.children.get(d);return null!==a?(b=Ue(a,t(b),c),null!=b?{path:(new A(d)).C(b.path),value:b.value}:null):null}
function Ve(a,b){return Ue(a,b,function(){return!0})}h.subtree=function(a){if(a.j())return this;var b=this.children.get(C(a));return null!==b?b.subtree(t(a)):Te};h.set=function(a,b){if(a.j())return new Qe(b,this.children);var c=C(a),d=(this.children.get(c)||Te).set(t(a),b),c=this.children.Ea(c,d);return new Qe(this.value,c)};
h.remove=function(a){if(a.j())return this.children.j()?Te:new Qe(null,this.children);var b=C(a),c=this.children.get(b);return c?(a=c.remove(t(a)),b=a.j()?this.children.remove(b):this.children.Ea(b,a),null===this.value&&b.j()?Te:new Qe(this.value,b)):this};h.get=function(a){if(a.j())return this.value;var b=this.children.get(C(a));return b?b.get(t(a)):null};
function We(a,b,c){if(b.j())return c;var d=C(b);b=We(a.children.get(d)||Te,t(b),c);d=b.j()?a.children.remove(d):a.children.Ea(d,b);return new Qe(a.value,d)}function Xe(a,b){return Ye(a,v,b)}function Ye(a,b,c){var d={};a.children.ka(function(a,f){d[a]=Ye(f,b.C(a),c)});return c(b,a.value,d)}function Ze(a,b,c){return $e(a,b,v,c)}function $e(a,b,c,d){var e=a.value?d(c,a.value):!1;if(e)return e;if(b.j())return null;e=C(b);return(a=a.children.get(e))?$e(a,t(b),c.C(e),d):null}
function af(a,b,c){var d=v;if(!b.j()){var e=!0;a.value&&(e=c(d,a.value));!0===e&&(e=C(b),(a=a.children.get(e))&&bf(a,t(b),d.C(e),c))}}function bf(a,b,c,d){if(b.j())return a;a.value&&d(c,a.value);var e=C(b);return(a=a.children.get(e))?bf(a,t(b),c.C(e),d):Te}function cf(a,b){df(a,v,b)}function df(a,b,c){a.children.ka(function(a,e){df(e,b.C(a),c)});a.value&&c(b,a.value)}function ef(a,b){a.children.ka(function(a,d){d.value&&b(a,d.value)})}var Te=new Qe(null);
Qe.prototype.toString=function(){var a={};cf(this,function(b,c){a[b.toString()]=c.toString()});return H(a)};function ff(a){this.Y=a}var gf=new ff(new Qe(null));function hf(a,b,c){if(b.j())return new ff(new Qe(c));var d=Ve(a.Y,b);if(null!=d){var e=d.path,d=d.value;b=B(e,b);d=d.M(b,c);return new ff(a.Y.set(e,d))}a=We(a.Y,b,new Qe(c));return new ff(a)}function jf(a,b,c){var d=a;kb(c,function(a,c){d=hf(d,b.C(a),c)});return d}ff.prototype.mc=function(a){if(a.j())return gf;a=We(this.Y,a,Te);return new ff(a)};function kf(a,b){var c=Ve(a.Y,b);return null!=c?a.Y.get(c.path).ja(B(c.path,b)):null}
function lf(a){var b=[],c=a.Y.value;null!=c?c.R()||c.X(F,function(a,c){b.push(new x(a,c))}):a.Y.children.ka(function(a,c){null!=c.value&&b.push(new x(a,c.value))});return b}function mf(a,b){if(b.j())return a;var c=kf(a,b);return null!=c?new ff(new Qe(c)):new ff(a.Y.subtree(b))}ff.prototype.j=function(){return this.Y.j()};ff.prototype.apply=function(a){return nf(v,this.Y,a)};
function nf(a,b,c){if(null!=b.value)return c.M(a,b.value);var d=null;b.children.ka(function(b,f){".priority"===b?(D(null!==f.value,"Priority writes must always be leaf nodes"),d=f.value):c=nf(a.C(b),f,c)});c.ja(a).j()||null===d||(c=c.M(a.C(".priority"),d));return c};la.ue;function of(){this.f=gf;this.g=[];this.m=-1}h=of.prototype;
h.mc=function(a){var b=yc(this.g,function(b){return b.vc===a});D(0<=b,"removeWrite called with nonexistent writeId.");var c=this.g[b];this.g.splice(b,1);for(var d=c.visible,e=!1,f=this.g.length-1;d&&0<=f;){var g=this.g[f];g.visible&&(f>=b&&pf(g,c.path)?d=!1:c.path.contains(g.path)&&(e=!0));f--}if(d){if(e)this.f=qf(this.g,rf,v),0<this.g.length?this.m=this.g[this.g.length-1].vc:this.m=-1;else if(c.Ba)this.f=this.f.mc(c.path);else{var k=this;hc(c.children,function(a,b){k.f=k.f.mc(c.path.C(b))})}return c.path}return null};
h.qa=function(a,b,c,d){if(c||d){var e=mf(this.f,a);return!d&&e.j()?b:d||null!=b||null!=kf(e,v)?(e=qf(this.g,function(b){return(b.visible||d)&&(!c||!(0<=yb(c,b.vc)))&&(b.path.contains(a)||a.contains(b.path))},a),b=b||P,e.apply(b)):null}e=kf(this.f,a);if(null!=e)return e;e=mf(this.f,a);return e.j()?b:null!=b||null!=kf(e,v)?(b=b||P,e.apply(b)):null};
h.Ib=function(a,b){var c=P,d=kf(this.f,a);if(d)d.R()||d.X(F,function(a,b){c=c.U(a,b)});else if(b){var e=mf(this.f,a);b.X(F,function(a,b){var d=mf(e,new A(a)).apply(b);c=c.U(a,d)});Nb(lf(e),function(a){c=c.U(a.name,a.node)})}else e=mf(this.f,a),Nb(lf(e),function(a){c=c.U(a.name,a.node)});return c};h.Tb=function(a,b,c,d){D(c||d,"Either existingEventSnap or existingServerSnap must exist");a=a.C(b);if(null!=kf(this.f,a))return null;a=mf(this.f,a);return a.j()?d.ja(b):a.apply(d.ja(b))};
h.Ia=function(a,b,c){a=a.C(b);var d=kf(this.f,a);return null!=d?d:Oa(c,b)?mf(this.f,a).apply(c.u().P(b)):null};h.Eb=function(a){return kf(this.f,a)};h.Ac=function(a,b,c,d,e,f){var g;a=mf(this.f,a);g=kf(a,v);if(null==g)if(null!=b)g=a.apply(b);else return[];g=g.La(f);if(g.j()||g.R())return[];b=[];a=ke(f);e=e?g.rb(c,f):g.qb(c,f);for(f=Mc(e);f&&b.length<d;)0!==a(f,c)&&b.push(f),f=Mc(e);return b};
function pf(a,b){return a.Ba?a.path.contains(b):!!qc(a.children,function(c,d){return a.path.C(d).contains(b)})}function rf(a){return a.visible}
function qf(a,b,c){for(var d=gf,e=0;e<a.length;++e){var f=a[e];if(b(f)){var g=f.path;if(f.Ba)c.contains(g)?(g=B(c,g),d=hf(d,g,f.Ba)):g.contains(c)&&(g=B(g,c),d=hf(d,v,f.Ba.ja(g)));else if(f.children)if(c.contains(g))g=B(c,g),d=jf(d,g,f.children);else{if(g.contains(c))if(g=B(g,c),g.j())d=jf(d,v,f.children);else if(f=K(f.children,C(g)))f=f.ja(t(g)),d=hf(d,v,f)}else throw Nd("WriteRecord should have .snap or .children");}}return d}function sf(a,b){this.fb=a;this.Y=b}h=sf.prototype;
h.qa=function(a,b,c){return this.Y.qa(this.fb,a,b,c)};h.Ib=function(a){return this.Y.Ib(this.fb,a)};h.Tb=function(a,b,c){return this.Y.Tb(this.fb,a,b,c)};h.Eb=function(a){return this.Y.Eb(this.fb.C(a))};h.Ac=function(a,b,c,d,e){return this.Y.Ac(this.fb,a,b,c,d,e)};h.Ia=function(a,b){return this.Y.Ia(this.fb,a,b)};h.C=function(a){return new sf(this.fb.C(a),this.Y)};function tf(){Oe.call(this,["online"]);this.f=!0;if("undefined"!==typeof window&&"undefined"!==typeof window.addEventListener){var a=this;window.addEventListener("online",function(){a.f||(a.f=!0,a.A("online",!0))},!1);window.addEventListener("offline",function(){a.f&&(a.f=!1,a.A("online",!1))},!1)}}ka(tf,Oe);tf.prototype.Lc=function(a){D("online"===a,"Unknown event type: "+a);return[this.f]};ba(tf);function uf(){this.children={};this.Dc=0;this.value=null}function vf(a,b,c){this.m=a?a:"";this.g=b?b:null;this.f=c?c:new uf}function wf(a,b){for(var c=b instanceof A?b:new A(b),d=a,e;null!==(e=C(c));)d=new vf(e,d,K(d.f.children,e)||new uf),c=t(c);return d}h=vf.prototype;h.va=function(){return this.f.value};function xf(a,b){D("undefined"!==typeof b,"Cannot set value to undefined");a.f.value=b;yf(a)}h.ec=function(){return 0<this.f.Dc};h.j=function(){return null===this.va()&&!this.ec()};
h.X=function(a){var b=this;hc(this.f.children,function(c,d){a(new vf(d,b,c))})};function zf(a,b,c,d){c&&!d&&b(a);a.X(function(a){zf(a,b,!0,d)});c&&d&&b(a)}function Af(a,b){for(var c=a.parent();null!==c&&!b(c);)c=c.parent()}h.path=function(){return new A(null===this.g?this.m:this.g.path()+"/"+this.m)};h.name=function(){return this.m};h.parent=function(){return this.g};
function yf(a){if(null!==a.g){var b=a.g,c=a.m,d=a.j(),e=y(b.f.children,c);d&&e?(delete b.f.children[c],b.f.Dc--,yf(b)):d||e||(b.f.children[c]=a.f,b.f.Dc++,yf(b))}};function Bf(){Oe.call(this,["visible"]);var a,b;"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(b="visibilitychange",a="hidden"):"undefined"!==typeof document.mozHidden?(b="mozvisibilitychange",a="mozHidden"):"undefined"!==typeof document.msHidden?(b="msvisibilitychange",a="msHidden"):"undefined"!==typeof document.webkitHidden&&(b="webkitvisibilitychange",a="webkitHidden"));this.ha=!0;if(b){var c=this;document.addEventListener(b,
function(){var b=!document[a];b!==c.ha&&(c.ha=b,c.A("visible",b))},!1)}}ka(Bf,Oe);Bf.prototype.Lc=function(a){D("visible"===a,"Unknown event type: "+a);return[this.ha]};ba(Bf);var Cf=function(){var a=0,b=[];return function(c){var d=c===a;a=c;for(var e=Array(8),f=7;0<=f;f--)e[f]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c%64),c=Math.floor(c/64);D(0===c,"Cannot push at time == 0");c=e.join("");if(d){for(f=11;0<=f&&63===b[f];f--)b[f]=0;b[f]++}else for(f=0;12>f;f++)b[f]=Math.floor(64*Math.random());for(f=0;12>f;f++)c+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f]);D(20===c.length,"nextPushId: Length should be 20.");
return c}}();function Df(){this.f={}}
function Ef(a,b){var c=b.type,d=b.Ja;D("child_added"==c||"child_changed"==c||"child_removed"==c,"Only child changes supported for tracking");D(".priority"!==d,"Only non-priority child changes can be tracked.");var e=K(a.f,d);if(e){var f=e.type;if("child_added"==c&&"child_removed"==f)a.f[d]=new G("child_changed",b.Ca,d,e.Ca);else if("child_removed"==c&&"child_added"==f)delete a.f[d];else if("child_removed"==c&&"child_changed"==f)a.f[d]=new G("child_removed",e.Sc,d);else if("child_changed"==c&&"child_added"==
f)a.f[d]=new G("child_added",b.Ca,d);else if("child_changed"==c&&"child_changed"==f)a.f[d]=new G("child_changed",b.Ca,d,e.Sc);else throw Nd("Illegal combination of changes: "+b+" occurred after "+e);}else a.f[d]=b};function Ff(a){this.g=a;this.w=a.G.W()}function Gf(a,b,c,d){var e=[],f=[];Nb(b,function(b){"child_changed"===b.type&&a.w.gc(b.Sc,b.Ca)&&f.push(new G("child_moved",b.Ca,b.Ja))});Hf(a,e,"child_removed",b,d,c);Hf(a,e,"child_added",b,d,c);Hf(a,e,"child_moved",f,d,c);Hf(a,e,"child_changed",b,d,c);Hf(a,e,Qa,b,d,c);return e}function Hf(a,b,c,d,e,f){d=tc(d,function(a){return a.type===c});Ac(d,r(a.f,a));Nb(d,function(c){var d=If(a,c,f);Nb(e,function(e){e.Xc(c.type)&&b.push(e.createEvent(d,a.g))})})}
function If(a,b,c){"value"!==b.type&&"child_removed"!==b.type&&(b.lc=c.Mc(b.Ja,b.Ca,a.w));return b}Ff.prototype.f=function(a,b){if(null==a.Ja||null==b.Ja)throw Nd("Should only compare child_ events.");return this.w.compare(new x(a.Ja,a.Ca),new x(b.Ja,b.Ca))};function Jf(){}Jf.prototype.Xc;Jf.prototype.createEvent;Jf.prototype.Qa;Jf.prototype.Ec;Jf.prototype.matches;Jf.prototype.Nc;function Kf(a,b,c){this.jb=a;this.Ta=b;this.Ua=c||null}h=Kf.prototype;h.Xc=function(a){return"value"===a};h.createEvent=function(a,b){var c=b.G.W();return new Wa("value",this,new U(a.Ca,b.Ab(),c))};
h.Qa=function(a){var b=this.Ua;if("cancel"===a.dc()){D(this.Ta,"Raising a cancel event on a listener with no cancel callback");var c=this.Ta;return function(){c.call(b,a.error)}}var d=this.jb;return function(){d.call(b,a.oc)}};h.Ec=function(a,b){return this.Ta?new Xa(this,a,b):null};h.matches=function(a){return a instanceof Kf?a.jb&&this.jb?a.jb===this.jb&&a.Ua===this.Ua:!0:!1};h.Nc=function(){return null!==this.jb};function Lf(a,b,c){this.ia=a;this.Ta=b;this.Ua=c}h=Lf.prototype;
h.Xc=function(a){a="children_added"===a?"child_added":a;return oc(this.ia,"children_removed"===a?"child_removed":a)};h.Ec=function(a,b){return this.Ta?new Xa(this,a,b):null};h.createEvent=function(a,b){D(null!=a.Ja,"Child events should have a childName.");var c=b.Ab().C(a.Ja);return new Wa(a.type,this,new U(a.Ca,c,b.G.W()),a.lc)};
h.Qa=function(a){var b=this.Ua;if("cancel"===a.dc()){D(this.Ta,"Raising a cancel event on a listener with no cancel callback");var c=this.Ta;return function(){c.call(b,a.error)}}var d=this.ia[a.bc];return function(){d.call(b,a.oc,a.lc)}};
h.matches=function(a){if(a instanceof Lf){if(!this.ia||!a.ia)return!0;if(this.Ua===a.Ua){var b=kc(a.ia);if(b===kc(this.ia)){if(1===b){var b=lc(a.ia),c=lc(this.ia);return c===b&&(!a.ia[b]||!this.ia[c]||a.ia[b]===this.ia[c])}return jc(this.ia,function(b,c){return a.ia[c]===b})}}}return!1};h.Nc=function(){return null!==this.ia};function Mf(a,b){this.L=a;this.f=b}function Nf(a,b,c,d){return new Mf(new Ma(b,c,d),a.f)}function Of(a){return a.L.ca?a.L.u():null}Mf.prototype.I=function(){return this.f};function Ua(a){return a.f.ca?a.f.u():null};function Pf(a,b){this.uc=a;this.Od=b}function Qf(a){this.O=a}
Qf.prototype.Ma=function(a,b,c,d){var e=new Df,f;if(b.type===sa)b.source.Ic?c=Rf(this,a,b.path,b.Ba,c,d,e):(D(b.source.kd,"Unknown source."),f=b.source.cd,c=Sf(this,a,b.path,b.Ba,c,d,f,e));else if(b.type===ee)b.source.Ic?c=Tf(this,a,b.path,b.children,c,d,e):(D(b.source.kd,"Unknown source."),f=b.source.cd,c=Uf(this,a,b.path,b.children,c,d,f,e));else if(b.type===na)if(b.Yc)if(f=b.path,null!=c.Eb(f))c=a;else{b=new Ta(c,a,d);d=a.L.u();if(f.j()||".priority"===C(f))Na(a.I())?b=c.qa(Ua(a)):(b=a.I().u(),
D(b instanceof Be,"serverChildren would be complete if leaf node"),b=c.Ib(b)),b=this.O.pa(d,b,e);else{f=C(f);var g=c.Ia(f,a.I());null==g&&Oa(a.I(),f)&&(g=d.P(f));b=null!=g?this.O.M(d,f,g,b,e):a.L.u().wa(f)?this.O.M(d,f,P,b,e):d;b.j()&&Na(a.I())&&(d=c.qa(Ua(a)),d.R()&&(b=this.O.pa(b,d,e)))}d=Na(a.I())||null!=c.Eb(v);c=Nf(a,b,d,this.O.za())}else c=Vf(this,a,b.path,c,d,e);else if(b.type===qa)d=b.path,b=a.I(),f=b.u(),g=b.ca||d.j(),c=Wf(this,new Mf(a.L,new Ma(f,g,b.nb)),d,c,Sa,e);else throw Nd("Unknown operation type: "+
b.type);e=mc(e.f);d=c;b=d.L;b.ca&&(f=b.u().R()||b.u().j(),g=Of(a),(0<e.length||!a.L.ca||f&&!b.u().$(g)||!b.u().J().$(g.J()))&&e.push(Pa(Of(d))));return new Pf(c,e)};
function Wf(a,b,c,d,e,f){var g=b.L;if(null!=d.Eb(c))return b;var k;if(c.j())D(Na(b.I()),"If change path is empty, we must have complete server data"),b.I().nb?(e=Ua(b),d=d.Ib(e instanceof Be?e:P)):d=d.qa(Ua(b)),f=a.O.pa(b.L.u(),d,f);else{var l=C(c);if(".priority"==l)D(1==Aa(c),"Can't have a priority with additional path components"),f=g.u(),k=b.I().u(),d=d.Tb(c,f,k),f=null!=d?a.O.ba(f,d):g.u();else{var m=t(c);Oa(g,l)?(k=b.I().u(),d=d.Tb(c,g.u(),k),d=null!=d?g.u().P(l).M(m,d):g.u().P(l)):d=d.Ia(l,
b.I());f=null!=d?a.O.M(g.u(),l,d,e,f):g.u()}}return Nf(b,f,g.ca||c.j(),a.O.za())}function Sf(a,b,c,d,e,f,g,k){var l=b.I();g=g?a.O:a.O.ob();if(c.j())d=g.pa(l.u(),d,null);else if(g.za()&&!l.nb)d=l.u().M(c,d),d=g.pa(l.u(),d,null);else{var m=C(c);if((c.j()?!l.ca||l.nb:!Oa(l,C(c)))&&1<Aa(c))return b;d=l.u().P(m).M(t(c),d);d=".priority"==m?g.ba(l.u(),d):g.M(l.u(),m,d,Sa,null)}l=l.ca||c.j();b=new Mf(b.L,new Ma(d,l,g.za()));return Wf(a,b,c,e,new Ta(e,b,f),k)}
function Rf(a,b,c,d,e,f,g){var k=b.L;e=new Ta(e,b,f);if(c.j())d=a.O.pa(b.L.u(),d,g),a=Nf(b,d,!0,a.O.za());else if(f=C(c),".priority"===f)d=a.O.ba(b.L.u(),d),a=Nf(b,d,k.ca,k.nb);else{c=t(c);var l=k.u().P(f),m;if(c.j())m=d;else{var u=e.ld(f);null!=u?m=".priority"===Ba(c)&&u.ja(c.parent()).j()?u:u.M(c,d):m=P}l.$(m)?a=b:(d=a.O.M(k.u(),f,m,e,g),a=Nf(b,d,k.ca,a.O.za()))}return a}
function Tf(a,b,c,d,e,f,g){var k=b;cf(d,function(d,m){var u=c.C(d);Oa(b.L,C(u))&&(k=Rf(a,k,u,m,e,f,g))});cf(d,function(d,m){var u=c.C(d);Oa(b.L,C(u))||(k=Rf(a,k,u,m,e,f,g))});return k}function Xf(a,b){cf(b,function(b,d){a=a.M(b,d)});return a}
function Uf(a,b,c,d,e,f,g,k){if(b.I().u().j()&&!Na(b.I()))return b;var l=b;c=c.j()?d:We(Te,c,d);var m=b.I().u();c.children.ka(function(c,d){if(m.wa(c)){var I=b.I().u().P(c),I=Xf(I,d);l=Sf(a,l,new A(c),I,e,f,g,k)}});c.children.ka(function(c,d){var I=!Na(b.I())&&null==d.value;m.wa(c)||I||(I=b.I().u().P(c),I=Xf(I,d),l=Sf(a,l,new A(c),I,e,f,g,k))});return l}
function Vf(a,b,c,d,e,f){if(null!=d.Eb(c))return b;var g=new Ta(d,b,e),k=e=b.L.u();if(Na(b.I())){if(c.j())e=d.qa(Ua(b)),k=a.O.pa(b.L.u(),e,f);else if(".priority"===C(c)){var l=d.Ia(C(c),b.I());null==l||e.j()||e.J().$(l)||(k=a.O.ba(e,l))}else l=C(c),e=d.Ia(l,b.I()),null!=e&&(k=a.O.M(b.L.u(),l,e,g,f));e=!0}else if(b.L.ca||c.j())k=e,e=b.L.u(),e.R()||e.X(F,function(c){var e=d.Ia(c,b.I());null!=e&&(k=a.O.M(k,c,e,g,f))}),e=b.L.ca;else{l=C(c);if(1==Aa(c)||Oa(b.L,l))c=d.Ia(l,b.I()),null!=c&&(k=a.O.M(e,l,
c,g,f));e=!1}return Nf(b,k,e,a.O.za())};function Yf(a,b){this.ya=a;var c=a.G,d=new Zf(c.W()),c=$f(c)?new Zf(c.W()):c.la?new ag(c):new bg(c);this.g=new Qf(c);var e=b.I(),f=b.L,g=d.pa(P,e.u(),null),k=c.pa(P,f.u(),null);this.Da=new Mf(new Ma(k,f.ca,c.za()),new Ma(g,e.ca,d.za()));this.f=[];this.m=new Ff(a)}function cg(a){return a.ya}h=Yf.prototype;h.I=function(){return this.Da.I().u()};h.Pa=function(a){var b=Ua(this.Da);return b&&($f(this.ya.G)||!a.j()&&!b.P(C(a)).j())?b.ja(a):null};h.j=function(){return 0===this.f.length};h.ib=function(a){this.f.push(a)};
h.Sa=function(a,b){var c=[];if(b){D(null==a,"A cancel should cancel all event registrations.");var d=this.ya.path;Nb(this.f,function(a){(a=a.Ec(b,d))&&c.push(a)})}if(a){for(var e=[],f=0;f<this.f.length;++f){var g=this.f[f];if(!g.matches(a))e.push(g);else if(a.Nc()){e=e.concat(this.f.slice(f+1));break}}this.f=e}else this.f=[];return c};
h.Ma=function(a,b,c){a.type===ee&&null!==a.source.ab&&(D(Ua(this.Da),"We should always have a full cache before handling merges"),D(Of(this.Da),"Missing event cache, even though we have a server cache"));var d=this.Da;a=this.g.Ma(d,a,b,c);b=this.g;c=a.uc;D(c.L.u().vb(b.O.W()),"Event snap not indexed");D(c.I().u().vb(b.O.W()),"Server snap not indexed");D(Na(a.uc.I())||!Na(d.I()),"Once a server snap is complete, it should never go back");this.Da=a.uc;return dg(this,a.Od,a.uc.L.u(),null)};
function eg(a,b){var c=a.Da.L,d=[];c.u().R()||c.u().X(F,function(a,b){d.push(new G("child_added",b,a))});c.ca&&d.push(Pa(c.u()));return dg(a,d,c.u(),b)}function dg(a,b,c,d){return Gf(a.m,b,c,d?[d]:a.f)};function fg(){this.f={}}h=fg.prototype;h.j=function(){return Zb(this.f)};h.Ma=function(a,b,c){var d=a.source.ab;if(null!==d)return d=K(this.f,d),D(null!=d,"SyncTree gave us an op for an invalid query."),d.Ma(a,b,c);var e=[];hc(this.f,function(d){e=e.concat(d.Ma(a,b,c))});return e};h.ib=function(a,b,c,d,e){var f=a.ra(),g=K(this.f,f);if(!g){var g=c.qa(e?d:null),k=!1;g?k=!0:(d instanceof Be?g=c.Ib(d):g=P,k=!1);g=new Yf(a,new Mf(new Ma(g,k,!1),new Ma(d,e,!1)));this.f[f]=g}g.ib(b);return eg(g,b)};
h.Sa=function(a,b,c){var d=a.ra(),e=[],f=[],g=null!=gg(this);if("default"===d){var k=this;hc(this.f,function(a,d){f=f.concat(a.Sa(b,c));a.j()&&(delete k.f[d],$f(a.ya.G)||e.push(a.ya))})}else{var l=K(this.f,d);l&&(f=f.concat(l.Sa(b,c)),l.j()&&(delete this.f[d],$f(l.ya.G)||e.push(l.ya)))}g&&null==gg(this)&&e.push(new V(a.B,a.path));return{fe:e,Qd:f}};function hg(a){return tc(mc(a.f),function(a){return!$f(a.ya.G)})}h.Pa=function(a){var b=null;hc(this.f,function(c){b=b||c.Pa(a)});return b};
function ig(a,b){if($f(b.G))return gg(a);var c=b.ra();return K(a.f,c)}function gg(a){return rc(a.f,function(a){return $f(a.ya.G)})||null};la.re;function jg(a){this.f=Te;this.g=new of;this.A={};this.m={};this.o=a}function kg(a,b,c,d,e){var f=a.g,g=e;D(d>f.m,"Stacking an older write on top of newer ones");p(g)||(g=!0);f.g.push({path:b,Ba:c,vc:d,visible:g});g&&(f.f=hf(f.f,b,c));f.m=d;return e?lg(a,new ra(oa,b,c)):[]}function mg(a,b,c,d){var e=a.g;D(d>e.m,"Stacking an older merge on top of newer ones");e.g.push({path:b,children:c,vc:d,visible:!0});e.f=jf(e.f,b,c);e.m=d;c=Se(c);return lg(a,new de(oa,b,c))}
function ng(a,b,c){c=c||!1;b=a.g.mc(b);return null==b?[]:lg(a,new ma(b,c))}function og(a,b,c){c=Se(c);return lg(a,new de(he,b,c))}function pg(a,b,c,d){d=qg(a,d);if(null!=d){var e=rg(d);d=e.path;e=e.ab;b=B(d,b);c=new ra(new ge(!1,!0,e,!0),b,c);return sg(a,d,c)}return[]}function tg(a,b,c,d){if(d=qg(a,d)){var e=rg(d);d=e.path;e=e.ab;b=B(d,b);c=Se(c);c=new de(new ge(!1,!0,e,!0),b,c);return sg(a,d,c)}return[]}
jg.prototype.ib=function(a,b){var c=a.path,d=null,e=!1;af(this.f,c,function(a,b){var f=B(a,c);d=b.Pa(f);e=e||null!=gg(b);return!d});var f=this.f.get(c);f?(e=e||null!=gg(f),d=d||f.Pa(v)):(f=new fg,this.f=this.f.set(c,f));var g;null!=d?g=!0:(g=!1,d=P,ef(this.f.subtree(c),function(a,b){var c=b.Pa(v);c&&(d=d.U(a,c))}));var k=null!=ig(f,a);if(!k&&!$f(a.G)){var l=ug(a);D(!oc(this.m,l),"View does not exist, but we have a tag");var m=vg++;this.m[l]=m;this.A["_"+m]=l}g=f.ib(a,b,new sf(c,this.g),d,g);k||e||
(f=ig(f,a),g=g.concat(wg(this,a,f)));return g};
jg.prototype.Sa=function(a,b,c){var d=a.path,e=this.f.get(d),f=[];if(e&&("default"===a.ra()||null!=ig(e,a))){f=e.Sa(a,b,c);e.j()&&(this.f=this.f.remove(d));e=f.fe;f=f.Qd;b=-1!==yc(e,function(a){return $f(a.G)});var g=Ze(this.f,d,function(a,b){return null!=gg(b)});if(b&&!g&&(d=this.f.subtree(d),!d.j()))for(var d=xg(d),k=0;k<d.length;++k){var l=d[k],m=l.ya,l=yg(this,l);this.o.$c(m,zg(this,m),l.fc,l.S)}if(!g&&0<e.length&&!c)if(b)this.o.qc(a,null);else{var u=this;Nb(e,function(a){a.ra();var b=u.m[ug(a)];
u.o.qc(a,b)})}Ag(this,e)}return f};jg.prototype.qa=function(a,b){var c=this.g,d=Ze(this.f,a,function(b,c){var d=B(b,a);if(d=c.Pa(d))return d});return c.qa(a,d,b,!0)};function xg(a){return Xe(a,function(a,c,d){if(c&&null!=gg(c))return[gg(c)];var e=[];c&&(e=hg(c));hc(d,function(a){e=e.concat(a)});return e})}function Ag(a,b){for(var c=0;c<b.length;++c){var d=b[c];if(!$f(d.G)){var d=ug(d),e=a.m[d];delete a.m[d];delete a.A["_"+e]}}}
function wg(a,b,c){var d=b.path,e=zg(a,b);c=yg(a,c);b=a.o.$c(b,e,c.fc,c.S);d=a.f.subtree(d);if(e)D(null==gg(d.value),"If we're adding a query, it shouldn't be shadowed");else for(e=Xe(d,function(a,b,c){if(!a.j()&&b&&null!=gg(b))return[cg(gg(b))];var d=[];b&&(d=d.concat(uc(hg(b),function(a){return a.ya})));hc(c,function(a){d=d.concat(a)});return d}),d=0;d<e.length;++d)c=e[d],a.o.qc(c,zg(a,c));return b}
function yg(a,b){var c=b.ya,d=zg(a,c);return{fc:function(){return(b.I()||P).hash()},S:function(b){if("ok"===b){if(d){var f=c.path;if(b=qg(a,d)){var g=rg(b);b=g.path;g=g.ab;f=B(b,f);f=new pa(new ge(!1,!0,g,!0),f);b=sg(a,b,f)}else b=[]}else b=lg(a,new pa(he,c.path));return b}f="Unknown Error";"too_big"===b?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==b?f="Client doesn't have permission to access the desired data.":"unavailable"==b&&
(f="The service is unavailable");f=Error(b+": "+f);f.code=b.toUpperCase();return a.Sa(c,null,f)}}}function ug(a){return a.path.toString()+"$"+a.ra()}function rg(a){var b=a.indexOf("$");D(-1!==b&&b<a.length-1,"Bad queryKey.");return{ab:a.substr(b+1),path:new A(a.substr(0,b))}}function qg(a,b){var c=a.A,d="_"+b;return null!==c&&d in c?c[d]:void 0}function zg(a,b){var c=ug(b);return K(a.m,c)}var vg=1;
function sg(a,b,c){var d=a.f.get(b);D(d,"Missing sync point for query tag that we're tracking");return d.Ma(c,new sf(b,a.g),null)}function lg(a,b){return Bg(a,b,a.f,null,new sf(v,a.g))}function Bg(a,b,c,d,e){if(b.path.j())return Cg(a,b,c,d,e);var f=c.get(v);null==d&&null!=f&&(d=f.Pa(v));var g=[],k=C(b.path),l=b.Qb(k);if((c=c.children.get(k))&&l)var m=d?d.P(k):null,k=e.C(k),g=g.concat(Bg(a,l,c,m,k));f&&(g=g.concat(f.Ma(b,e,d)));return g}
function Cg(a,b,c,d,e){var f=c.get(v);null==d&&null!=f&&(d=f.Pa(v));var g=[];c.children.ka(function(c,f){var m=d?d.P(c):null,u=e.C(c),z=b.Qb(c);z&&(g=g.concat(Cg(a,z,f,m,u)))});f&&(g=g.concat(f.Ma(b,e,d)));return g};function Zf(a){this.w=a}h=Zf.prototype;h.M=function(a,b,c,d,e){D(a.vb(this.w),"A node must be indexed if only a child is updated");d=a.P(b);if(d.$(c))return a;null!=e&&(c.j()?a.wa(b)?Ef(e,new G("child_removed",d,b)):D(a.R(),"A child remove without an old child only makes sense on a leaf node"):d.j()?Ef(e,new G("child_added",c,b)):Ef(e,new G("child_changed",c,b,d)));return a.R()&&c.j()?a:a.U(b,c).La(this.w)};
h.pa=function(a,b,c){null!=c&&(a.R()||a.X(F,function(a,e){b.wa(a)||Ef(c,new G("child_removed",e,a))}),b.R()||b.X(F,function(b,e){if(a.wa(b)){var f=a.P(b);f.$(e)||Ef(c,new G("child_changed",e,b,f))}else Ef(c,new G("child_added",e,b))}));return b.La(this.w)};h.ba=function(a,b){return a.j()?P:a.ba(b)};h.za=function(){return!1};h.ob=function(){return this};h.W=function(){return this.w};function bg(a){this.m=new Zf(a.W());this.w=a.W();var b;a.ma?(b=Dg(a),b=a.W().Mb(Eg(a),b)):b=a.W().Pb();this.g=b;a.na?(b=Fg(a),a=a.W().Mb(Gg(a),b)):a=a.W().Nb();this.f=a}h=bg.prototype;h.matches=function(a){return 0>=this.w.compare(this.g,a)&&0>=this.w.compare(a,this.f)};h.M=function(a,b,c,d,e){this.matches(new x(b,c))||(c=P);return this.m.M(a,b,c,d,e)};
h.pa=function(a,b,c){b.R()&&(b=P);var d=b.La(this.w),d=d.ba(P),e=this;b.X(F,function(a,b){e.matches(new x(a,b))||(d=d.U(a,P))});return this.m.pa(a,d,c)};h.ba=function(a){return a};h.za=function(){return!0};h.ob=function(){return this.m};h.W=function(){return this.w};function ag(a){this.f=new bg(a);this.w=a.W();D(a.la,"Only valid if limit has been set");this.da=a.da;this.g=!Hg(a)}h=ag.prototype;h.M=function(a,b,c,d,e){this.f.matches(new x(b,c))||(c=P);return a.P(b).$(c)?a:a.Ra()<this.da?this.f.ob().M(a,b,c,d,e):Ig(this,a,b,c,d,e)};
h.pa=function(a,b,c){var d;if(b.R()||b.j())d=P.La(this.w);else if(2*this.da<b.Ra()&&b.vb(this.w)){d=P.La(this.w);b=this.g?b.rb(this.f.f,this.w):b.qb(this.f.g,this.w);for(var e=0;0<b.Fa.length&&e<this.da;){var f=Mc(b),g;if(g=this.g?0>=this.w.compare(this.f.g,f):0>=this.w.compare(f,this.f.f))d=d.U(f.name,f.node),e++;else break}}else{d=b.La(this.w);d=d.ba(P);var k,l,m;if(this.g){b=d.md(this.w);k=this.f.f;l=this.f.g;var u=ke(this.w);m=function(a,b){return u(b,a)}}else b=d.pb(this.w),k=this.f.g,l=this.f.f,
m=ke(this.w);for(var e=0,z=!1;0<b.Fa.length;)f=Mc(b),!z&&0>=m(k,f)&&(z=!0),(g=z&&e<this.da&&0>=m(f,l))?e++:d=d.U(f.name,P)}return this.f.ob().pa(a,d,c)};h.ba=function(a){return a};h.za=function(){return!0};h.ob=function(){return this.f.ob()};h.W=function(){return this.w};
function Ig(a,b,c,d,e,f){var g;if(a.g){var k=ke(a.w);g=function(a,b){return k(b,a)}}else g=ke(a.w);D(b.Ra()==a.da,"");var l=new x(c,d),m=a.g?Fe(b,a.w):Ge(b,a.w),u=a.f.matches(l);if(b.wa(c)){var z=b.P(c),m=e.Kc(a.w,m,a.g);null!=m&&m.name==c&&(m=e.Kc(a.w,m,a.g));e=null==m?1:g(m,l);if(u&&!d.j()&&0<=e)return null!=f&&Ef(f,new G("child_changed",d,c,z)),b.U(c,d);null!=f&&Ef(f,new G("child_removed",z,c));b=b.U(c,P);return null!=m&&a.f.matches(m)?(null!=f&&Ef(f,new G("child_added",m.node,m.name)),b.U(m.name,
m.node)):b}return d.j()?b:u&&0<=g(m,l)?(null!=f&&(Ef(f,new G("child_removed",m.node,m.name)),Ef(f,new G("child_added",d,c))),b.U(c,d).U(m.name,P)):b};function Jg(){this.mb=this.na=this.eb=this.ma=this.la=!1;this.da=0;this.gb="";this.ub=null;this.Ya="";this.sb=null;this.Xa="";this.w=F}var Kg=new Jg;function Hg(a){return""===a.gb?a.ma:"l"===a.gb}function Eg(a){D(a.ma,"Only valid if start has been set");return a.ub}function Dg(a){D(a.ma,"Only valid if start has been set");return a.eb?a.Ya:"[MIN_NAME]"}function Gg(a){D(a.na,"Only valid if end has been set");return a.sb}
function Fg(a){D(a.na,"Only valid if end has been set");return a.mb?a.Xa:"[MAX_NAME]"}h=Jg.prototype;h.W=function(){return this.w};function Lg(a){var b=new Jg;b.la=a.la;b.da=a.da;b.ma=a.ma;b.ub=a.ub;b.eb=a.eb;b.Ya=a.Ya;b.na=a.na;b.sb=a.sb;b.mb=a.mb;b.Xa=a.Xa;b.w=a.w;return b}h.Pc=function(a){var b=Lg(this);b.la=!0;b.da=a;b.gb="";return b};h.Qc=function(a){var b=Lg(this);b.la=!0;b.da=a;b.gb="l";return b};h.Rc=function(a){var b=Lg(this);b.la=!0;b.da=a;b.gb="r";return b};
h.pc=function(a,b){var c=Lg(this);c.ma=!0;p(a)||(a=null);c.ub=a;null!=b?(c.eb=!0,c.Ya=b):(c.eb=!1,c.Ya="");return c};h.ac=function(a,b){var c=Lg(this);c.na=!0;p(a)||(a=null);c.sb=a;p(b)?(c.mb=!0,c.Xa=b):(c.Ae=!1,c.Xa="");return c};function Mg(a,b){var c=Lg(a);c.w=b;return c}function Ng(a){var b={};a.ma&&(b.sp=a.ub,a.eb&&(b.sn=a.Ya));a.na&&(b.ep=a.sb,a.mb&&(b.en=a.Xa));if(a.la){b.l=a.da;var c=a.gb;""===c&&(c=Hg(a)?"l":"r");b.vf=c}a.w!==F&&(b.i=a.w.toString());return b}
function $f(a){return!(a.ma||a.na||a.la)}function Og(a){var b={};if($f(a)&&a.w==F)return b;var c;a.w===F?c="$priority":a.w===te?c="$value":a.w===qe?c="$key":(D(a.w instanceof me,"Unrecognized index type!"),c=a.w.toString());b.orderBy=H(c);a.ma&&(b.startAt=H(a.ub),a.eb&&(b.startAt+=","+H(a.Ya)));a.na&&(b.endAt=H(a.sb),a.mb&&(b.endAt+=","+H(a.Xa)));a.la&&(Hg(a)?b.limitToFirst=a.da:b.limitToLast=a.da);return b}h.toString=function(){return H(Ng(this))};function Pg(a){this.f=fc()+fc()+fc();this.g=a}
Pg.prototype.open=function(a,b,c){function d(){c&&(c(J("USER_CANCELLED")),c=null)}var e=this,f=Wb(ub),g;b.requestId=this.f;b.redirectTo=f.scheme+"://"+f.host+"/blank/page.html";a+=/\?/.test(a)?"":"?";a+=Mb(b);(g=window.open(a,"_blank","location=no"))&&fa(g.addEventListener)?(g.addEventListener("loadstart",function(a){var b;if(b=a&&a.url)a:{try{var m=document.createElement("a");m.href=a.url;b=m.host===f.host&&"/blank/page.html"===m.pathname;break a}catch(u){}b=!1}b&&(a=Ub(a.url),g.removeEventListener("exit",
d),g.close(),a=new vb(null,null,{requestId:e.f,requestKey:a}),e.g.requestWithCredential("/auth/session",a,c),c=null)}),g.addEventListener("exit",d)):c(J("TRANSPORT_UNAVAILABLE"))};Pg.isAvailable=function(){return!NODE_CLIENT&&hb()};Pg.prototype.kb=function(){return"redirect"};function Qg(a){if(!a.window_features||"undefined"!==typeof navigator&&(-1!==navigator.userAgent.indexOf("Fennec/")||-1!==navigator.userAgent.indexOf("Firefox/")&&-1!==navigator.userAgent.indexOf("Android")))a.window_features=void 0;a.window_name||(a.window_name="_blank");this.f=a}
Qg.prototype.open=function(a,b,c){function d(a){g&&(document.body.removeChild(g),g=void 0);u&&(u=clearInterval(u));Sb(window,"message",e);Sb(window,"unload",d);if(m&&!a)try{m.close()}catch(b){k.postMessage("die",l)}m=k=void 0}function e(a){if(a.origin===l)try{var b=ob(a.data);"ready"===b.a?k.postMessage(z,l):"error"===b.a?(d(!1),c&&(c(b.d),c=null)):"response"===b.a&&(d(b.forceKeepWindowOpen),c&&(c(null,b.d),c=null))}catch(e){}}var f=jb(),g,k;if(!this.f.relay_url)return c(Error("invalid arguments: origin of url and relay_url must match"));
var l=Tb(a);if(l!==Tb(this.f.relay_url))c&&setTimeout(function(){c(Error("invalid arguments: origin of url and relay_url must match"))},0);else{f&&(g=document.createElement("iframe"),g.setAttribute("src",this.f.relay_url),g.style.display="none",g.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(g),k=g.contentWindow);a+=(/\?/.test(a)?"":"?")+Mb(b);var m=window.open(a,this.f.window_name,this.f.window_features);k||(k=m);var u=setInterval(function(){m&&m.closed&&(d(!1),c&&(c(J("USER_CANCELLED")),
c=null))},500),z=H({a:"request",d:b});Rb(window,"unload",d);Rb(window,"message",e)}};
Qg.isAvailable=function(){return!NODE_CLIENT&&"postMessage"in window&&!ib()&&!(hb()||"undefined"!==typeof navigator&&(navigator.userAgent.match(/Windows Phone/)||window.Windows&&/^ms-appx:/.test(location.href))||"undefined"!==typeof navigator&&"undefined"!==typeof window&&(navigator.userAgent.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||navigator.userAgent.match(/CriOS/)||navigator.userAgent.match(/Twitter for iPhone/)||navigator.userAgent.match(/FBAN\/FBIOS/)||window.navigator.standalone))&&
!("undefined"!==typeof navigator&&navigator.userAgent.match(/PhantomJS/))};Qg.prototype.kb=function(){return"popup"};function Rg(a){var b={},c={},d={},e="";try{var f=a.split("."),b=ob(Qd(f[0])||""),c=ob(Qd(f[1])||""),e=f[2],d=c.d||{};delete c.d}catch(g){}return{xe:b,Vb:c,data:d,ze:e}}function Sg(a){a=Rg(a).Vb;return"object"===typeof a&&a.hasOwnProperty("iat")?K(a,"iat"):null};function Tg(a,b){this.f=Vd("p:rest:");this.g=a;this.m=b;this.o=null;this.ea={}}function Ug(a,b){if(p(b))return"tag$"+b;var c=a.G;D($f(c)&&c.w==F,"should have a tag if it's not a default query.");return a.path.toString()}h=Tg.prototype;
h.od=function(a,b,c,d){var e=a.path.toString();this.f("Listen called for "+e+" "+a.ra());var f=Ug(a,c),g={};this.ea[f]=g;a=Og(a.G);var k=this;Vg(this,e+".json",a,function(a,b){var u=b;404===a&&(a=u=null);null===a&&k.m(e,u,!1,c);K(k.ea,f)===g&&d(a?401==a?"permission_denied":"rest_error:"+a:"ok",null)})};h.vd=function(a,b){var c=Ug(a,b);delete this.ea[c]};h.V=function(a,b){this.o=a;var c=Rg(a),d=c.data,c=c.Vb&&c.Vb.exp;b&&b("ok",{auth:d,expires:c})};h.sc=function(a){this.o=null;a("ok",null)};h.Tc=function(){};
h.qd=function(){};h.hc=function(){};h.Fb=function(){};h.pd=function(){};h.Vc=function(){};
function Vg(a,b,c,d){c=c||{};c.format="export";a.o&&(c.auth=a.o);var e=(a.g.bb?"https://":"http://")+a.g.host+b+"?"+Mb(c);a.f("Sending REST request for "+e);var f=new XMLHttpRequest;f.onreadystatechange=function(){if(d&&4===f.readyState){a.f("REST Response for "+e+" received. status:",f.status,"response:",f.responseText);var b=null;if(200<=f.status&&300>f.status){try{b=ob(f.responseText)}catch(c){S("Failed to parse JSON response for "+e+": "+f.responseText)}d(null,b)}else 401!==f.status&&404!==f.status&&
S("Got unsuccessful REST response for "+e+" Status: "+f.status),d(f.status);d=null}};f.open("GET",e,!0);f.send()};function Wg(a,b){this.g=["session",a.jc,a.xb].join(":");this.f=b}Wg.prototype.set=function(a,b){if(!b)if(this.f.length)b=this.f[0];else throw Error("wd.login.SessionManager : No storage options available!");b.set(this.g,a)};Wg.prototype.get=function(){var a=uc(this.f,r(this.m,this)),a=tc(a,function(a){return null!==a});Ac(a,function(a,c){return Sg(c.token)-Sg(a.token)});return 0<a.length?a.shift():null};Wg.prototype.m=function(a){try{var b=a.get(this.g);if(b&&b.token)return b}catch(c){}return null};
function Xg(a){Nb(a.f,function(b){b.remove(a.g)})};function Da(a){for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b++:2048>d?b+=2:55296<=d&&56319>=d?(b+=4,c++):b+=3}return b};var Yg=/[\[\].#$\/\u0000-\u001F\u007F]/,Zg=/[\[\].#$\u0000-\u001F\u007F]/;function $g(a){return q(a)&&0!==a.length&&!Yg.test(a)}function ah(a){return null===a||q(a)||ea(a)&&!Yd(a)||ga(a)&&y(a,".sv")}function bh(a,b,c,d){d&&!p(b)||ch(N(a,1,d),b,c)}
function ch(a,b,c){c instanceof A&&(c=new Ca(c,a));if(!p(b))throw Error(a+"contains undefined "+Fa(c));if(fa(b))throw Error(a+"contains a function "+Fa(c)+" with contents: "+b.toString());if(Yd(b))throw Error(a+"contains "+b.toString()+" "+Fa(c));if(q(b)&&b.length>10485760/3&&10485760<Da(b))throw Error(a+"contains a string greater than 10485760 utf8 bytes "+Fa(c)+" ('"+b.substring(0,50)+"...')");if(ga(b)){var d=!1,e=!1;kb(b,function(b,g){if(".value"===b)d=!0;else if(".priority"!==b&&".sv"!==b&&(e=
!0,!$g(b)))throw Error(a+" contains an invalid key ("+b+") "+Fa(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');c.push(b);ch(a,g,c);c.pop()});if(d&&e)throw Error(a+' contains ".value" child '+Fa(c)+" in addition to actual children.");}}
function dh(a,b){var c,d;for(c=0;c<b.length;c++){d=b[c];for(var e=d.slice(),f=0;f<e.length;f++)if((".priority"!==e[f]||f!==e.length-1)&&!$g(e[f]))throw Error(a+"contains an invalid key ("+e[f]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');}b.sort(A.f);e=null;for(c=0;c<b.length;c++){d=b[c];if(null!==e&&e.contains(d))throw Error(a+"contains a path "+e.toString()+" that is ancestor of another path "+d.toString());e=d}}
function eh(a,b,c){var d=N(a,1,!1);if(!ga(b)||da(b))throw Error(d+" must be an Object containing the children to replace.");if(y(b,".value"))throw Error(d+' must not contain ".value".  To overwrite with a leaf value, just use .set() instead.');var e=[];kb(b,function(a,b){var k=new A(a);ch(d,b,c.C(k));if(".priority"===Ba(k)&&!ah(b))throw Error(d+"contains an invalid value for '"+k.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");e.push(k)});
dh(d,e)}function fh(a,b,c){if(Yd(c))throw Error(N(a,b,!1)+"is "+c.toString()+", but must be a valid Wilddog priority (a string, finite number, server value, or null).");if(!ah(c))throw Error(N(a,b,!1)+"must be a valid Wilddog priority (a string, finite number, server value, or null).");}
function gh(a,b,c){if(!c||p(b))switch(b){case "value":case "child_added":case "child_removed":case "child_changed":case "child_moved":break;default:throw Error(N(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".');}}function hh(a,b,c,d){if((!d||p(c))&&!$g(c))throw Error(N(a,b,d)+'was an invalid key: "'+c+'".  Wilddog keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").');}
function ih(a,b){if(!q(b)||0===b.length||Zg.test(b))throw Error(N(a,1,!1)+'was an invalid path: "'+b+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"');}function jh(a,b){if(".info"===C(b))throw Error(a+" failed: Can't modify data under /.info/");}function kh(a,b){if(!q(b))throw Error(N(a,1,!1)+"must be a valid credential (a string).");}function lh(a,b,c){if(!q(c))throw Error(N(a,b,!1)+"must be a valid string.");}
function mh(a,b,c,d){if(!d||p(c))if(!ga(c)||null===c)throw Error(N(a,b,d)+"must be a valid object.");}function nh(a,b,c){if(!ga(b)||null===b||!y(b,c))throw Error(N(a,1,!1)+'must contain the key "'+c+'"');if(!q(K(b,c)))throw Error(N(a,1,!1)+'must contain the key "'+c+'" with type "string"');};function U(a,b,c){this.f=a;this.g=b;this.w=c}U.prototype.N=function(){M("Wilddog.DataSnapshot.val",0,0,arguments.length);return this.f.N()};U.prototype.val=U.prototype.N;U.prototype.hd=function(){M("Wilddog.DataSnapshot.exportVal",0,0,arguments.length);return this.f.N(!0)};U.prototype.exportVal=U.prototype.hd;U.prototype.m=function(){M("Wilddog.DataSnapshot.exists",0,0,arguments.length);return!this.f.j()};U.prototype.exists=U.prototype.m;
U.prototype.C=function(a){M("Wilddog.DataSnapshot.child",0,1,arguments.length);ea(a)&&(a=String(a));ih("Wilddog.DataSnapshot.child",a);var b=new A(a),c=this.g.C(b);return new U(this.f.ja(b),c,F)};U.prototype.child=U.prototype.C;U.prototype.wa=function(a){M("Wilddog.DataSnapshot.hasChild",1,1,arguments.length);ih("Wilddog.DataSnapshot.hasChild",a);var b=new A(a);return!this.f.ja(b).j()};U.prototype.hasChild=U.prototype.wa;
U.prototype.J=function(){M("Wilddog.DataSnapshot.getPriority",0,0,arguments.length);return this.f.J().N()};U.prototype.getPriority=U.prototype.J;U.prototype.o=function(a){M("Wilddog.DataSnapshot.forEach",1,1,arguments.length);O("Wilddog.DataSnapshot.forEach",1,a,!1);if(this.f.R())return!1;var b=this;return!!this.f.X(this.w,function(c,d){return a(new U(d,b.g.C(c),F))})};U.prototype.forEach=U.prototype.o;
U.prototype.ec=function(){M("Wilddog.DataSnapshot.hasChildren",0,0,arguments.length);return this.f.R()?!1:!this.f.j()};U.prototype.hasChildren=U.prototype.ec;U.prototype.name=function(){S("Wilddog.DataSnapshot.name() being deprecated. Please use Wilddog.DataSnapshot.key() instead.");M("Wilddog.DataSnapshot.name",0,0,arguments.length);return this.key()};U.prototype.name=U.prototype.name;U.prototype.key=function(){M("Wilddog.DataSnapshot.key",0,0,arguments.length);return this.g.key()};
U.prototype.key=U.prototype.key;U.prototype.Ra=function(){M("Wilddog.DataSnapshot.numChildren",0,0,arguments.length);return this.f.Ra()};U.prototype.numChildren=U.prototype.Ra;U.prototype.Ab=function(){M("Wilddog.DataSnapshot.ref",0,0,arguments.length);return this.g};U.prototype.ref=U.prototype.Ab;function W(a,b,c,d){this.B=a;this.path=b;this.G=c;this.f=d}
function oh(a){var b=null,c=null;a.ma&&(b=Eg(a));a.na&&(c=Gg(a));if(a.W()===qe){if(a.ma){if("[MIN_NAME]"!=Dg(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof b)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}if(a.na){if("[MAX_NAME]"!=Fg(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==
typeof c)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}}else if(a.W()===F){if(null!=b&&!ah(b)||null!=c&&!ah(c))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).");}else if(D(a.W()instanceof me||a.W()===te,"unknown index type."),null!=b&&"object"===typeof b||null!=c&&"object"===typeof c)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.");
}function ph(a){if(a.ma&&a.na&&a.la&&(!a.la||""===a.gb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.");}function qh(a,b){if(!0===a.f)throw Error(b+": You can't combine multiple orderBy calls.");}W.prototype.Ab=function(){M("Query.ref",0,0,arguments.length);return new V(this.B,this.path)};W.prototype.ref=W.prototype.Ab;
W.prototype.$a=function(a,b,c,d){M("Query.on",2,4,arguments.length);gh("Query.on",a,!1);O("Query.on",2,b,!1);var e=rh("Query.on",c,d);if("value"===a)sh(this.B,this,new Kf(b,e.cancel||null,e.context||null));else{var f={};f[a]=b;sh(this.B,this,new Lf(f,e.cancel,e.context))}return b};W.prototype.on=W.prototype.$a;
W.prototype.yb=function(a,b,c){M("Query.off",0,3,arguments.length);gh("Query.off",a,!0);O("Query.off",2,b,!0);zb("Query.off",3,c);var d=null,e=null;"value"===a?d=new Kf(b||null,null,c||null):a&&(b&&(e={},e[a]=b),d=new Lf(e,null,c||null));e=this.B;d=".info"===C(this.path)?e.T.Sa(this,d):e.f.Sa(this,d);ab(e.g,this.path,d)};W.prototype.off=W.prototype.yb;
W.prototype.m=function(a,b){function c(k){f&&(f=!1,e.yb(a,c),b&&b.call(d.context,k),g.m(k))}M("Query.once",1,4,arguments.length);gh("Query.once",a,!1);O("Query.once",2,b,!0);var d=rh("Query.once",arguments[2],arguments[3]),e=this,f=!0,g=new Q;Gd(g.f);this.$a(a,c,function(b){e.yb(a,c);d.cancel&&d.cancel.call(d.context,b);g.g(b)});return g.f};W.prototype.once=W.prototype.m;
W.prototype.Pc=function(a){S("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead.");M("Query.limit",1,1,arguments.length);if(!ea(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limit: First argument must be a positive integer.");if(this.G.la)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var b=this.G.Pc(a);ph(b);return new W(this.B,this.path,b,this.f)};W.prototype.limit=W.prototype.Pc;
W.prototype.Qc=function(a){M("Query.limitToFirst",1,1,arguments.length);if(!ea(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.G.la)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new W(this.B,this.path,this.G.Qc(a),this.f)};W.prototype.limitToFirst=W.prototype.Qc;
W.prototype.Rc=function(a){M("Query.limitToLast",1,1,arguments.length);if(!ea(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.G.la)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new W(this.B,this.path,this.G.Rc(a),this.f)};W.prototype.limitToLast=W.prototype.Rc;
W.prototype.o=function(a){M("Query.orderByChild",1,1,arguments.length);if("$key"===a)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===a)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===a)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');hh("Query.orderByChild",1,a,!1);qh(this,"Query.orderByChild");var b=Mg(this.G,new me(a));oh(b);return new W(this.B,
this.path,b,!0)};W.prototype.orderByChild=W.prototype.o;W.prototype.A=function(){M("Query.orderByKey",0,0,arguments.length);qh(this,"Query.orderByKey");var a=Mg(this.G,qe);oh(a);return new W(this.B,this.path,a,!0)};W.prototype.orderByKey=W.prototype.A;W.prototype.H=function(){M("Query.orderByPriority",0,0,arguments.length);qh(this,"Query.orderByPriority");var a=Mg(this.G,F);oh(a);return new W(this.B,this.path,a,!0)};W.prototype.orderByPriority=W.prototype.H;
W.prototype.T=function(){M("Query.orderByValue",0,0,arguments.length);qh(this,"Query.orderByValue");var a=Mg(this.G,te);oh(a);return new W(this.B,this.path,a,!0)};W.prototype.orderByValue=W.prototype.T;
W.prototype.pc=function(a,b){M("Query.startAt",0,2,arguments.length);bh("Query.startAt",a,this.path,!0);hh("Query.startAt",2,b,!0);var c=this.G.pc(a,b);ph(c);oh(c);if(this.G.ma)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");p(a)||(b=a=null);return new W(this.B,this.path,c,this.f)};W.prototype.startAt=W.prototype.pc;
W.prototype.ac=function(a,b){M("Query.endAt",0,2,arguments.length);bh("Query.endAt",a,this.path,!0);hh("Query.endAt",2,b,!0);var c=this.G.ac(a,b);ph(c);oh(c);if(this.G.na)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new W(this.B,this.path,c,this.f)};W.prototype.endAt=W.prototype.ac;
W.prototype.g=function(a,b){M("Query.equalTo",1,2,arguments.length);bh("Query.equalTo",a,this.path,!1);hh("Query.equalTo",2,b,!0);if(this.G.ma)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.G.na)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.pc(a,b).ac(a,b)};W.prototype.equalTo=W.prototype.g;
W.prototype.toString=function(){M("Query.toString",0,0,arguments.length);for(var a=this.path,b="",c=a.aa;c<a.F.length;c++)""!==a.F[c]&&(b+="/"+encodeURIComponent(String(a.F[c])));return this.B.toString()+(b||"/")};W.prototype.toString=W.prototype.toString;W.prototype.ra=function(){var a=$d(Ng(this.G));return"{}"===a?"default":a};
function rh(a,b,c){var d={cancel:null,context:null};if(b&&c)d.cancel=b,O(a,3,d.cancel,!0),d.context=c,zb(a,4,d.context);else if(b)if("object"===typeof b&&null!==b)d.context=b;else if("function"===typeof b)d.cancel=b;else throw Error(N(a,3,!0)+" must either be a cancel callback or a context object.");return d};function th(a,b,c,d){Oe.call(this,["auth_status"]);this.o=a;this.T=b;this.ha=c;this.ta=d;this.g=new Wg(a,[rb,L]);this.f=null;this.H=!1;uh(this)}ka(th,Oe);h=th.prototype;h.Jc=function(){return this.f||null};function uh(a){L.get("redirect_request_id")&&vh(a);var b=a.g.get();b&&b.token?(wh(a,b),a.T(b.token,function(c,d){xh(a,c,d,!1,b.token,b)},function(b,d){yh(a,"resumeSession()",b,d)})):wh(a,null)}
function zh(a,b,c,d,e,f){"wilddogio-demo.com"===a.o.domain&&S("Wilddog authentication is not supported on demo Wilddogs (*.wilddogio-demo.com). To secure your Wilddog, create a production Wilddog at https://www.wilddog.com.");a.T(b,function(f,k){xh(a,f,k,!0,b,c,d||{},e)},function(b,c){yh(a,"auth()",b,c,f)})}function Ah(a,b){Xg(a.g);wh(a,null);a.ha(function(a,d){if("ok"===a)T(b,null);else{var e=(a||"error").toUpperCase(),f=e;d&&(f+=": "+d);f=Error(f);f.code=e;T(b,f)}})}
function xh(a,b,c,d,e,f,g,k){"ok"===b?(d&&(b=c.auth,f.auth=b,f.expires=c.expires,f.token=e,c=null,b&&y(b,"uid")?c=K(b,"uid"):y(f,"uid")&&(c=K(f,"uid")),f.uid=c,c="custom",b&&y(b,"provider")?c=K(b,"provider"):y(f,"provider")&&(c=K(f,"provider")),f.provider=c,Xg(a.g),g=g||{},c=rb,"sessionOnly"===g.remember&&(c=L),"none"!==g.remember&&a.g.set(f,c),wh(a,f)),T(k,null,f)):(Xg(a.g),wh(a,null),f=a=(b||"error").toUpperCase(),c&&(f+=": "+c),f=Error(f),f.code=a,T(k,f))}
function yh(a,b,c,d,e){S(b+" was canceled: "+d);Xg(a.g);wh(a,null);a=Error(d);a.code=c.toUpperCase();T(e,a)}function Bh(a,b,c,d,e){Ch(a);c=new vb(d||{},{},c||{});Dh(a,[ac],"/auth/"+b,c,e)}
function Eh(a,b,c,d){Ch(a);var e=[Qg,Pg];c=xb(c);"anonymous"===b||"password"===b?setTimeout(function(){T(d,J("TRANSPORT_UNAVAILABLE"))},0):(c.rc.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width=625,top="+("object"===typeof screen?.5*(screen.height-625):0)+",left="+("object"===typeof screen?.5*(screen.width-625):0),c.rc.relay_url=Xb(a.o.xb),c.rc.requestWithCredential=r(a.Cb,a),Dh(a,e,"/auth/"+b,c,d))}
function vh(a){var b=L.get("redirect_request_id");if(b){var c=L.get("redirect_client_options");L.remove("redirect_request_id");L.remove("redirect_client_options");var d=[gc,Yb],b={requestId:b,requestKey:Ub(document.location.hash)},c=new vb(c,{},b);a.H=!0;try{document.location.hash=document.location.hash.replace(/&__wilddog_request_key=([a-zA-z0-9]*)/,"")}catch(e){}Dh(a,d,"/auth/session",c,function(){this.H=!1}.bind(a))}}
h.Fc=function(a,b){Ch(this);var c=xb(a);c.Ka._method="POST";this.Cb("/users",c,function(a,c){a?T(b,a):T(b,a,c)})};h.Uc=function(a,b){var c=this;Ch(this);var d="/users/"+encodeURIComponent(a.email),e=xb(a);e.Ka._method="DELETE";this.Cb(d,e,function(a,d){!a&&d&&d.uid&&c.f&&c.f.uid&&c.f.uid===d.uid&&Ah(c);T(b,a)})};h.Cc=function(a,b){Ch(this);var c="/users/"+encodeURIComponent(a.email)+"/password",d=xb(a);d.Ka._method="PUT";d.Ka.password=a.newPassword;this.Cb(c,d,function(a){T(b,a)})};
h.Bc=function(a,b){Ch(this);var c="/users/"+encodeURIComponent(a.oldEmail)+"/email",d=xb(a);d.Ka._method="PUT";d.Ka.email=a.newEmail;d.Ka.password=a.password;this.Cb(c,d,function(a){T(b,a)})};h.Wc=function(a,b){Ch(this);var c="/users/"+encodeURIComponent(a.email)+"/password",d=xb(a);d.Ka._method="POST";this.Cb(c,d,function(a){T(b,a)})};h.Cb=function(a,b,c){Fh(this,[ac],a,b,c)};
function Dh(a,b,c,d,e){Fh(a,b,c,d,function(b,c){!b&&c&&c.token&&c.uid?zh(a,c.token,c,d.Wb,function(a,b){a?T(e,a):T(e,null,b)}):T(e,b||J("UNKNOWN_ERROR"))})}
function Fh(a,b,c,d,e){b=tc(b,function(a){return"function"===typeof a.isAvailable&&a.isAvailable()});0===b.length?setTimeout(function(){T(e,J("TRANSPORT_UNAVAILABLE"))},0):(b=new (b.shift())(d.rc),d=lb(d.Ka),d.v=(NODE_CLIENT?"node-":"js-")+CLIENT_VERSION,d.transport=b.kb(),d.suppress_status_codes=!0,a=Vb()+"/"+a.o.xb+c,b.open(a,d,function(a,b){if(a)T(e,a);else if(b&&b.error){var c=Error(b.error.message);c.code=b.error.code;c.details=b.error.details;T(e,c)}else T(e,null,b)}))}
function wh(a,b){var c=null!==a.f||null!==b;a.f=b;c&&a.A("auth_status",b);a.ta(null!==b)}h.Lc=function(a){D("auth_status"===a,'initial event must be of type "auth_status"');return this.H?null:[this.f]};function Ch(a){var b=a.o;if("wilddogio.com"!==b.domain&&"wilddogio-demo.com"!==b.domain&&"auth.wilddog.com"===ub)throw Error("This custom Wilddog server ('"+a.o.domain+"') does not support delegated login.");};var Gh={},Hh=null;"undefined"!=typeof require&&"undefined"!==typeof module&&module.exports?Hh=require("engine.io-client"):Hh=eio;function Ih(a,b,c,d,e){this.T=a;this.m=Vd("c:"+this.T+":");this.ha=c;this.H=d;this.A=e;this.f=b;this.o=0;this.m("Connection created");this.g=Jh(this);this.g.on("open",Kh(this));this.g.on("error",Lh(this))}function Kh(a){return function(){a.g.on("message",Mh(a));a.g.on("close",Nh(a))}}
function Mh(a){return function(b){if(null==b)throw Error("data is null");if(0!=b.charAt(0))if(2==b.charAt(0)){var c=null;try{c=JSON.parse(b.substr(1))}catch(f){throw f;}if("object"!=typeof c||2>c.length)throw Error("decodedData in wrong format");b=c[1];if("wd"==c[0])if("c"==b.t)if(c=b.d,"h"==c.t){b=c.d;var c=b.ts,d=b.v,e=b.h;a.sessionId=b.s;"1.0"!=d&&S("Protocol version mismatch detected");0==a.o&&(e!=a.f.Aa?(tb(a.f,e),a.m("updateHost ",e),a.g.close(),a.g=Jh(a),a.g.on("open",Kh(a)),a.g.on("error",
Lh(a))):(a.o=1,a.m("realtime state connected"),b=a.f,d=b.Oa.indexOf(a.f.Aa),0<=d&&(b.Oa.splice(d,1),L.set("failHosts",JSON.stringify(b.Oa))),a.H&&(a.H(c),a.H=null)))}else"r"==c.t&&(c=c.d,a.m("Reset packet received.  New host: "+c),tb(a.f,c),a.close());else"d"==b.t&&a.ha(b.d);else a.m("eventType not known")}else 1!=b.charAt(0)&&a.m("data format error")}}function Nh(a){return function(){2!==a.o&&(a.m("Closing realtime connection."),a.o=2,a.A&&(a.A(),a.A=null))}}
function Lh(a){return function(b){if(0==a.o){var c=a.f.Aa,d=a.f;null!=c&&0>d.Oa.indexOf(c)&&c!=d.host&&(d.Oa.push(c),L.set("failHosts",JSON.stringify(d.Oa)));a.m("error while connecting",b,c);tb(a.f)}a.close()}}
function Jh(a){var b=(a.f.bb?"https://":"http://")+a.f.Aa+"?v=1.0&cv="+CLIENT_VERSION,c=a.f;c.host!==c.Aa&&(b=b+"&ns="+a.f.xb);a.sessionId&&(b=b+"&s="+a.sessionId);0<a.f.Oa.length&&(b=b+"&fst="+encodeURIComponent(a.f.Oa.join(",")));a={path:"/.ws",rememberUpgrade:!0};"undefined"==typeof document&&(a.jsonp=!1);return Hh(b,a)}Ih.prototype.xa=function(a){a="2"+JSON.stringify(["wd",{t:"d",d:a}]);this.g.send(a)};
Ih.prototype.close=function(){2!==this.o&&(this.m("Closing realtime connection."),this.o=2,this.g.close(),this.A&&(this.A(),this.A=null))};function Oh(a,b,c,d){this.yc=Ph++;this.f=Vd("p:"+this.yc+":");this.wc=!1;this.ea={};this.m=[];this.Ha=0;this.ta=[];this.g=!1;this.H=1E3;this.hb=3E5;this.ed=b;this.dd=c;this.Ed=d;this.Fd=a;this.Zc=null;this.Sb={};this.Cd=0;this.sa=this.xc=null;Qh(this,0);Bf.Va().$a("visible",this.ce,this);-1===a.host.indexOf("wd.local")&&tf.Va().$a("online",this.be,this)}var Ph=0,Rh=0;h=Oh.prototype;
h.xa=function(a,b,c){var d=++this.Cd;a={r:d,a:a,b:b};this.f(H(a));D(this.g,"sendRequest call when we're not connected not allowed.");this.A.xa(a);c&&(this.Sb[d]=c)};h.od=function(a,b,c,d){var e=a.ra(),f=a.path.toString();this.f("Listen called for "+f+" "+e);this.ea[f]=this.ea[f]||{};D(!this.ea[f][e],"listen() called twice for same path/queryId.");a={S:d,fc:b,de:a,tag:c};this.ea[f][e]=a;this.g&&Sh(this,a)};
function Sh(a,b){var c=b.de,d=c.path.toString(),e=c.ra();a.f("Listen on "+d+" for "+e);var f={p:d};b.tag&&(f.q=Ng(c.G),f.t=b.tag);f.h=b.fc();a.xa("q",f,function(f){var k=f.d,l=f.s;if(k&&"object"===typeof k&&y(k,"w")){var m=K(k,"w");da(m)&&0<=yb(m,"no_index")&&S("Using an unspecified index. Consider adding "+('".indexOn": "'+c.G.W().toString()+'"')+" at "+c.path.toString()+" to your security rules for better performance")}(a.ea[d]&&a.ea[d][e])===b&&(a.f("listen response",f),"ok"!==l&&Th(a,d,e),b.S&&
b.S(l,k))})}h.V=function(a,b,c){this.o={Pd:a,jd:!1,Jb:b,Ub:c};this.f("Authenticating using credential: "+a);Uh(this);(b=40==a.length)||(a=Rg(a).Vb,b="object"===typeof a&&!0===K(a,"admin"));b&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.hb=3E4)};h.sc=function(a){delete this.o;this.g&&this.xa("unauth",{},function(b){a(b.s,b.d)})};
function Uh(a){var b=a.o;a.g&&b&&a.xa("auth",{cred:b.Pd},function(c){var d=c.s;c=c.d||"error";"ok"!==d&&a.o===b&&delete a.o;b.jd?"ok"!==d&&b.Ub&&b.Ub(d,c):(b.jd=!0,b.Jb&&b.Jb(d,c))})}h.vd=function(a,b){var c=a.path.toString(),d=a.ra();this.f("Unlisten called for "+c+" "+d);if(Th(this,c,d)&&this.g){var e=Ng(a.G);this.f("Unlisten on "+c+" for "+d);c={p:c};b&&(c.q=e,c.t=b);this.xa("n",c)}};h.Tc=function(a,b,c){this.g?Vh(this,"o",a,b,c):this.ta.push({zb:a,action:"o",data:b,S:c})};
h.qd=function(a,b,c){this.g?Vh(this,"om",a,b,c):this.ta.push({zb:a,action:"om",data:b,S:c})};h.hc=function(a,b){this.g?Vh(this,"oc",a,null,b):this.ta.push({zb:a,action:"oc",data:null,S:b})};function Vh(a,b,c,d,e){c={p:c,d:d};a.f("onDisconnect "+b,c);a.xa(b,c,function(a){e&&setTimeout(function(){e(a.s,a.d)},Math.floor(0))})}h.Fb=function(a,b,c,d){Wh(this,"p",a,b,c,d)};h.pd=function(a,b,c,d){Wh(this,"m",a,b,c,d)};
function Wh(a,b,c,d,e,f){d={p:c,d:d};p(f)&&(d.h=f);a.m.push({action:b,request:d,S:e});a.Ha++;b=a.m.length-1;a.g?Xh(a,b):a.f("Buffering put: "+c)}function Xh(a,b){var c=a.m[b].action,d=a.m[b].request,e=a.m[b].S;a.m[b].ee=a.g;a.xa(c,d,function(d){a.f(c+" response",d);delete a.m[b];a.Ha--;0===a.Ha&&(a.m=[]);e&&e(d.s,d.d)})}h.Vc=function(a){if(this.g){a={c:a};this.f("reportStats",a);var b=this;this.xa("s",a,function(a){"ok"!==a.s&&b.f("reportStats","Error sending stats: "+a.d)})}};
h.$d=function(a){if("r"in a){this.f("from server: "+H(a));var b=a.r,c=this.Sb[b];c&&(delete this.Sb[b],c(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&(b=a.a,c=a.b,this.f("handleServerMessage",b,c),"d"===b?this.ed(c.p,c.d,!1,c.t):"m"===b?this.ed(c.p,c.d,!0,c.t):"c"===b?Yh(this,c.p,c.q):"ac"===b?(a=c.s,b=c.d,c=this.o,delete this.o,c&&c.Ub&&c.Ub(a,b)):"sd"===b?this.Zc?this.Zc(c):"msg"in c&&"undefined"!==typeof console&&console.log("WILDDOG: "+c.msg.replace("\n",
"\nWILDDOG: ")):Wd("Unrecognized action received from server: "+H(b)+"\nAre you using the latest client?"))}};h.ne=function(a){this.f("connection ready");this.g=!0;this.sa=(new Date).getTime();this.Ed({serverTimeOffset:a-(new Date).getTime()});a={};a["sdk.js."+CLIENT_VERSION.replace(/\./g,"-")]=1;hb()&&(a["framework.cordova"]=1);this.Vc(a);Zh(this);this.dd(!0)};
function Qh(a,b){D(!a.A,"Scheduling a connect when we're already connected/ing?");a.T&&clearTimeout(a.T);a.T=setTimeout(function(){a.T=null;if($h(a)){a.f("Making a connection attempt");a.xc=(new Date).getTime();a.sa=null;var b=r(a.$d,a),d=r(a.ne,a),e=r(a.rd,a),f=a.yc+":"+Rh++;a.A=new Ih(f,a.Fd,b,d,e)}},Math.floor(b))}h.ce=function(a){a&&!this.ha&&this.H===this.hb&&(this.f("Window became visible.  Reducing delay."),this.H=1E3,this.A||Qh(this,0));this.ha=a};
h.be=function(a){a?(this.f("Browser went online."),this.H=1E3,this.A||Qh(this,0)):(this.f("Browser went offline.  Killing connection."),this.A&&this.A.close())};
h.rd=function(){this.f("data client disconnected");this.g=!1;this.A=null;for(var a=0;a<this.m.length;a++){var b=this.m[a];b&&"h"in b.request&&b.ee&&(b.S&&b.S("disconnect"),delete this.m[a],this.Ha--)}0===this.Ha&&(this.m=[]);this.Sb={};$h(this)&&(this.ha?this.sa&&(3E4<(new Date).getTime()-this.sa&&(this.H=1E3),this.sa=null):(this.f("Window isn't visible.  Delaying reconnect."),this.H=this.hb,this.xc=(new Date).getTime()),a=Math.max(0,this.H-((new Date).getTime()-this.xc)),a*=Math.random(),this.f("Trying to reconnect in "+
a+"ms"),Qh(this,a),this.H=Math.min(this.hb,1.3*this.H));this.dd(!1)};h.Za=function(){this.wc=!0;this.A?this.A.close():(this.T&&(clearTimeout(this.T),this.T=null),this.g&&this.rd())};h.Db=function(){this.wc=!1;this.H=1E3;this.A||Qh(this,0)};function Yh(a,b,c){c=c?uc(c,function(a){return $d(a)}).join("$"):"default";(a=Th(a,b,c))&&a.S&&a.S("permission_denied")}
function Th(a,b,c){b=(new A(b)).toString();var d;p(a.ea[b])?(d=a.ea[b][c],delete a.ea[b][c],0===kc(a.ea[b])&&delete a.ea[b]):d=void 0;return d}function Zh(a){Uh(a);hc(a.ea,function(b){hc(b,function(b){Sh(a,b)})});for(var b=0;b<a.m.length;b++)a.m[b]&&Xh(a,b);for(;a.ta.length;)b=a.ta.shift(),Vh(a,b.action,b.zb,b.data,b.S)}function $h(a){var b;b=tf.Va().f;return!a.wc&&b};function ai(a,b){this.H=a;this.ta=Fc(a);this.g=new Ya;this.ha=1;this.Ga=null;this.m;b||0<=("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)?(this.m=new Tg(this.H,r(this.xd,this)),setTimeout(r(this.wd,this,!0),0)):this.m=this.Ga=new Oh(this.H,r(this.xd,this),r(this.wd,this),r(this.pe,this));this.hb=Gc(a,r(function(){return new za(this.ta,this.m)},this));this.o=new vf;this.Ha=
new Pb;var c=this;this.T=new jg({$c:function(a,b,f,g){b=[];f=c.Ha.u(a.path);f.j()||(b=lg(c.T,new ra(he,a.path,f)),setTimeout(function(){g("ok")},0));return b},qc:aa});bi(this,"connected",!1);this.A=new Ia;this.V=new th(a,r(this.m.V,this.m),r(this.m.sc,this.m),r(this.oe,this));this.$b=0;this.Oc=null;this.f=new jg({$c:function(a,b,f,g){c.m.od(a,f,b,function(b,e){var f=g(b,e);cb(c.g,a.path,f)});return[]},qc:function(a,b){c.m.vd(a,b)}})}h=ai.prototype;
h.toString=function(){return(this.H.bb?"https://":"http://")+this.H.host};h.name=function(){return this.H.xb};function ci(a){a=a.Ha.u(new A(".info/serverTimeOffset")).N()||0;return(new Date).getTime()+a}function di(a){a=a={timestamp:ci(a)};a.timestamp=a.timestamp||(new Date).getTime();return a}
h.xd=function(a,b,c,d){this.$b++;var e=new A(a);b=this.Oc?this.Oc(a,b):b;a=[];d?c?(b=ic(b,function(a){return E(a)}),a=tg(this.f,e,b,d)):(b=E(b),a=pg(this.f,e,b,d)):c?(d=ic(b,function(a){return E(a)}),a=og(this.f,e,d)):(d=E(b),a=lg(this.f,new ra(he,e,d)));d=e;0<a.length&&(d=ei(this,e));cb(this.g,d,a)};h.wd=function(a){bi(this,"connected",a);!1===a&&fi(this)};h.pe=function(a){var b=this;ae(a,function(a,d){bi(b,d,a)})};h.oe=function(a){bi(this,"authenticated",a)};
function bi(a,b,c){b=new A("/.info/"+b);c=E(c);var d=a.Ha;d.nc=d.nc.M(b,c);c=lg(a.T,new ra(he,b,c));cb(a.g,b,c)}h.cb=function(a,b,c,d){this.Rb("set",{path:a.toString(),value:b,ye:c});var e=di(this);b=E(b,c);var e=Ka(b,e),f=this.ha++,e=kg(this.f,a,e,f,!0);Za(this.g,e);var g=this;this.m.Fb(a.toString(),b.N(!0),function(b,c){var e="ok"===b;e||S("set at "+a+" failed: "+b);e=ng(g.f,f,!e);cb(g.g,a,e);gi(d,b,c)});e=hi(this,a);ei(this,e);cb(this.g,e,[])};
h.update=function(a,b,c){this.Rb("update",{path:a.toString(),value:b});var d=!0,e=di(this),f={};hc(b,function(a,b){d=!1;var c=E(a);f[b]=Ka(c,e)});if(d)eb("update() called with empty data.  Don't do anything."),gi(c,"ok");else{var g=this.ha++,k=mg(this.f,a,f,g);Za(this.g,k);var l=this;this.m.pd(a.toString(),b,function(b,d){var e="ok"===b;e||S("update at "+a+" failed: "+b);var e=ng(l.f,g,!e),f=a;0<e.length&&(f=ei(l,a));cb(l.g,f,e);gi(c,b,d)});b=hi(this,a);ei(this,b);cb(this.g,a,[])}};
function fi(a){a.Rb("onDisconnectEvents");var b=di(a),c=[];Ja(Ha(a.A,b),v,function(b,e){c=c.concat(lg(a.f,new ra(he,b,e)));var f=hi(a,b);ei(a,f)});a.A=new Ia;cb(a.g,v,c)}h.hc=function(a,b){var c=this;this.m.hc(a.toString(),function(d,e){"ok"===d&&Ne(c.A,a);gi(b,d,e)})};function ii(a,b,c,d){var e=E(c);a.m.Tc(b.toString(),e.N(!0),function(c,g){"ok"===c&&a.A.Bb(b,e);gi(d,c,g)})}function ji(a,b,c,d,e){var f=E(c,d);a.m.Tc(b.toString(),f.N(!0),function(c,d){"ok"===c&&a.A.Bb(b,f);gi(e,c,d)})}
function ki(a,b,c,d){var e=!0,f;for(f in c)e=!1;e?(eb("onDisconnect().update() called with empty data.  Don't do anything."),gi(d,"ok")):a.m.qd(b.toString(),c,function(e,f){if("ok"===e)for(var l in c){var m=E(c[l]);a.A.Bb(b.C(l),m)}gi(d,e,f)})}function sh(a,b,c){c=".info"===C(b.path)?a.T.ib(b,c):a.f.ib(b,c);ab(a.g,b.path,c)}h.Za=function(){this.Ga&&this.Ga.Za()};h.Db=function(){this.Ga&&this.Ga.Db()};
h.ad=function(a){if("undefined"!==typeof console){a?(this.sa||(this.sa=new xa(this.ta)),a=this.sa.get()):a=this.ta.get();var b=vc(nc(a),function(a,b){return Math.max(b.length,a)},0),c;for(c in a){for(var d=a[c],e=c.length;e<b+2;e++)c+=" ";console.log(c+d)}}};h.bd=function(a){var b=this.ta,c;p(c)||(c=1);y(b.f,a)||(b.f[a]=0);b.f[a]+=c;this.hb.ud[a]=!0};h.Rb=function(a){var b="";this.Ga&&(b=this.Ga.yc+":");eb(b,arguments)};
function gi(a,b,c){a&&fb(function(){if("ok"==b)a(null);else{var d=(b||"error").toUpperCase(),e=d;c&&(e+=": "+c);e=Error(e);e.code=d;a(e)}})};la.se;
function li(a,b,c,d,e){function f(){}a.Rb("transaction on "+b);var g=new V(a,b);g.$a("value",f);c={path:b,update:c,S:d,status:null,sd:Md(),fd:e,td:0,tc:function(){g.yb("value",f)},zc:null,ua:null,Xb:null,Yb:null,Zb:null};d=a.f.qa(b,void 0)||P;c.Xb=d;d=c.update(d.N());if(p(d)){ch("transaction failed: Data returned ",d,c.path);c.status=1;e=wf(a.o,b);var k=e.va()||[];k.push(c);xf(e,k);"object"===typeof d&&null!==d&&y(d,".priority")?(k=K(d,".priority"),D(ah(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):k=
(a.f.qa(b)||P).J().N();e=di(a);d=E(d,k);e=Ka(d,e);c.Yb=d;c.Zb=e;c.ua=a.ha++;c=kg(a.f,b,e,c.ua,c.fd);cb(a.g,b,c);mi(a)}else c.tc(),c.Yb=null,c.Zb=null,c.S&&(a=new U(c.Xb,new V(a,c.path),F),c.S(null,!1,a))}function mi(a,b){var c=b||a.o;b||ni(a,c);if(null!==c.va()){var d=oi(a,c);D(0<d.length,"Sending zero length transaction queue");wc(d,function(a){return 1===a.status})&&pi(a,c.path(),d)}else c.ec()&&c.X(function(b){mi(a,b)})}
function pi(a,b,c){for(var d=uc(c,function(a){return a.ua}),e=a.f.qa(b,d)||P,d=e,e=e.hash(),f=0;f<c.length;f++){var g=c[f];D(1===g.status,"tryToSendTransactionQueue_: items in queue should all be run.");g.status=2;g.td++;var k=B(b,g.path),d=d.M(k,g.Yb)}d=d.N(!0);a.m.Fb(b.toString(),d,function(d){a.Rb("transaction put response",{path:b.toString(),status:d});var e=[];if("ok"===d){d=[];for(f=0;f<c.length;f++){c[f].status=3;e=e.concat(ng(a.f,c[f].ua));if(c[f].S){var g=c[f].Zb,k=new V(a,c[f].path);d.push(r(c[f].S,
null,null,!0,new U(g,k,F)))}c[f].tc()}ni(a,wf(a.o,b));mi(a);cb(a.g,b,e);for(f=0;f<d.length;f++)fb(d[f])}else{if("datastale"===d)for(f=0;f<c.length;f++)c[f].status=4===c[f].status?5:1;else for(S("transaction at "+b.toString()+" failed: "+d),f=0;f<c.length;f++)c[f].status=5,c[f].zc=d;ei(a,b)}},e)}function ei(a,b){var c=qi(a,b),d=c.path(),c=oi(a,c);ri(a,c,d);return d}
function ri(a,b,c){if(0!==b.length){for(var d=[],e=[],f=uc(b,function(a){return a.ua}),g=0;g<b.length;g++){var k=b[g],l=B(c,k.path),m=!1,u;D(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===k.status)m=!0,u=k.zc,e=e.concat(ng(a.f,k.ua,!0));else if(1===k.status)if(25<=k.td)m=!0,u="maxretry",e=e.concat(ng(a.f,k.ua,!0));else{var z=a.f.qa(k.path,f)||P;k.Xb=z;var I=b[g].update(z.N());p(I)?(ch("transaction failed: Data returned ",I,k.path),l=E(I),"object"===typeof I&&null!=
I&&y(I,".priority")||(l=l.ba(z.J())),z=k.ua,I=di(a),I=Ka(l,I),k.Yb=l,k.Zb=I,k.ua=a.ha++,zc(f,z),e=e.concat(kg(a.f,k.path,I,k.ua,k.fd)),e=e.concat(ng(a.f,z,!0))):(m=!0,u="nodata",e=e.concat(ng(a.f,k.ua,!0)))}cb(a.g,c,e);e=[];m&&(b[g].status=3,setTimeout(b[g].tc,Math.floor(0)),b[g].S&&("nodata"===u?(k=new V(a,b[g].path),d.push(r(b[g].S,null,null,!1,new U(b[g].Xb,k,F)))):d.push(r(b[g].S,null,Error(u),!1,null))))}ni(a,a.o);for(g=0;g<d.length;g++)fb(d[g]);mi(a)}}
function qi(a,b){for(var c,d=a.o;null!==(c=C(b))&&null===d.va();)d=wf(d,c),b=t(b);return d}function oi(a,b){var c=[];si(a,b,c);c.sort(function(a,b){return a.sd-b.sd});return c}function si(a,b,c){var d=b.va();if(null!==d)for(var e=0;e<d.length;e++)c.push(d[e]);b.X(function(b){si(a,b,c)})}function ni(a,b){var c=b.va();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d;xf(b,0<c.length?c:null)}b.X(function(b){ni(a,b)})}
function hi(a,b){var c=qi(a,b).path(),d=wf(a.o,b);Af(d,function(b){ti(a,b)});ti(a,d);zf(d,function(b){ti(a,b)});return c}
function ti(a,b){var c=b.va();if(null!==c){for(var d=[],e=[],f=-1,g=0;g<c.length;g++)4!==c[g].status&&(2===c[g].status?(D(f===g-1,"All SENT items should be at beginning of queue."),f=g,c[g].status=4,c[g].zc="set"):(D(1===c[g].status,"Unexpected transaction status in abort"),c[g].tc(),e=e.concat(ng(a.f,c[g].ua,!0)),c[g].S&&d.push(r(c[g].S,null,Error("set"),!1,null))));-1===f?xf(b,null):c.length=f+1;cb(a.g,b.path(),e);for(g=0;g<d.length;g++)fb(d[g])}};function ui(){this.f={};this.g=!1}ba(ui);ui.prototype.Za=function(){for(var a in this.f)this.f[a].Za()};ui.prototype.interrupt=ui.prototype.Za;ui.prototype.Db=function(){for(var a in this.f)this.f[a].Db()};ui.prototype.resume=ui.prototype.Db;ui.prototype.Hc=function(){this.g=!0};var X={Td:function(){Gh.te.Sd();Gh.zd.we()}};X.forceLongPolling=X.Td;X.Ud=function(){Gh.zd.Sd()};X.forceWebSockets=X.Ud;X.ie=function(a,b){a.B.Ga.Zc=b};X.setSecurityDebugCallback=X.ie;X.ad=function(a,b){a.B.ad(b)};X.stats=X.ad;X.bd=function(a,b){a.B.bd(b)};X.statsIncrementCounter=X.bd;X.$b=function(a){return a.B.$b};X.dataUpdateCount=X.$b;X.Wd=function(a,b){a.B.Oc=b};X.interceptServerData=X.Wd;X.ae=function(a){new cc(a)};X.onPopupOpen=X.ae;X.ge=function(a){ub=a};X.setAuthenticationServer=X.ge;function Y(a,b){this.f=a;this.oa=b}Y.prototype.cancel=function(a){M("Wilddog.onDisconnect().cancel",0,1,arguments.length);O("Wilddog.onDisconnect().cancel",1,a,!0);var b=new Q;this.f.hc(this.oa,R(b,a));return b.f};Y.prototype.cancel=Y.prototype.cancel;Y.prototype.remove=function(a){M("Wilddog.onDisconnect().remove",0,1,arguments.length);jh("Wilddog.onDisconnect().remove",this.oa);O("Wilddog.onDisconnect().remove",1,a,!0);var b=new Q;ii(this.f,this.oa,null,R(b,a));return b.f};Y.prototype.remove=Y.prototype.remove;
Y.prototype.set=function(a,b){M("Wilddog.onDisconnect().set",1,2,arguments.length);jh("Wilddog.onDisconnect().set",this.oa);bh("Wilddog.onDisconnect().set",a,this.oa,!1);O("Wilddog.onDisconnect().set",2,b,!0);var c=new Q;ii(this.f,this.oa,a,R(c,b));return c.f};Y.prototype.set=Y.prototype.set;
Y.prototype.cb=function(a,b,c){M("Wilddog.onDisconnect().setWithPriority",2,3,arguments.length);jh("Wilddog.onDisconnect().setWithPriority",this.oa);bh("Wilddog.onDisconnect().setWithPriority",a,this.oa,!1);fh("Wilddog.onDisconnect().setWithPriority",2,b);O("Wilddog.onDisconnect().setWithPriority",3,c,!0);var d=new Q;ji(this.f,this.oa,a,b,R(d,c));return d.f};Y.prototype.setWithPriority=Y.prototype.cb;
Y.prototype.update=function(a,b){M("Wilddog.onDisconnect().update",1,2,arguments.length);jh("Wilddog.onDisconnect().update",this.oa);if(da(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;S("Passing an Array to Wilddog.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}eh("Wilddog.onDisconnect().update",a,this.oa);O("Wilddog.onDisconnect().update",2,b,!0);c=new Q;
ki(this.f,this.oa,a,R(c,b));return c.f};Y.prototype.update=Y.prototype.update;var Z={};Z.Gb=Oh;Z.DataConnection=Z.Gb;Oh.prototype.Dd=function(a,b){this.xa("q",{p:a},b)};Z.Gb.prototype.simpleListen=Z.Gb.prototype.Dd;Oh.prototype.Bd=function(a,b){this.xa("echo",{d:a},b)};Z.Gb.prototype.echo=Z.Gb.prototype.Bd;Oh.prototype.interrupt=Oh.prototype.Za;Z.Gd=Ih;Z.RealTimeConnection=Z.Gd;Ih.prototype.sendRequest=Ih.prototype.xa;Ih.prototype.close=Ih.prototype.close;
Z.Vd=function(a){var b=Oh.prototype.Fb;Oh.prototype.Fb=function(c,d,e,f){p(f)&&(f=a());b.call(this,c,d,e,f)};return function(){Oh.prototype.Fb=b}};Z.hijackHash=Z.Vd;Z.Ad=sb;Z.ConnectionTarget=Z.Ad;Z.ra=function(a){return a.ra()};Z.queryIdentifier=Z.ra;Z.Xd=function(a){return a.B.Ga.ea};Z.listens=Z.Xd;Z.Hc=function(a){a.Hc()};Z.forceRestClient=Z.Hc;function V(a,b){var c,d,e;if(a instanceof ai)c=a,d=b;else{M("new Wilddog",1,2,arguments.length);d=Wb(arguments[0]);c=d.je;"wilddog"===d.domain&&Xd(d.host+" is no longer supported. Please use <YOUR WILDDOG>.wilddogio.com instead");c||Xd("Cannot parse Wilddog url. Please use https://<YOUR WILDDOG>.wilddogio.com");d.bb||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Wilddog access from a secure page. Please use https in calls to new Wilddog().");
c=new sb(d.host,d.bb,c);d=new A(d.zb);e=d.toString();var f;!(f=!q(c.host)||0===c.host.length||!$g(c.xb))&&(f=0!==e.length)&&(e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),f=!(q(e)&&0!==e.length&&!Zg.test(e)));if(f)throw Error(N("new Wilddog",1,!1)+'must be a valid wilddog URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(b)if(b instanceof ui)e=b;else if(q(b))e=ui.Va(),c.jc=b;else throw Error("Expected a valid Wilddog.Context for second argument to new Wilddog()");else e=ui.Va();f=c.toString();
var g=K(e.f,f);g||(g=new ai(c,e.g),e.f[f]=g);c=g}W.call(this,c,d,Kg,!1)}ka(V,W);V.prototype.name=function(){S("Wilddog.name() being deprecated. Please use Wilddog.key() instead.");M("Wilddog.name",0,0,arguments.length);return this.key()};V.prototype.name=V.prototype.name;V.prototype.key=function(){M("Wilddog.key",0,0,arguments.length);return this.path.j()?null:Ba(this.path)};V.prototype.key=V.prototype.key;
V.prototype.C=function(a){M("Wilddog.child",1,1,arguments.length);if(ea(a))a=String(a);else if(!(a instanceof A))if(null===C(this.path)){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/"));ih("Wilddog.child",b)}else ih("Wilddog.child",a);return new V(this.B,this.path.C(a))};V.prototype.child=V.prototype.C;V.prototype.parent=function(){M("Wilddog.parent",0,0,arguments.length);var a=this.path.parent();return null===a?null:new V(this.B,a)};V.prototype.parent=V.prototype.parent;
V.prototype.root=function(){M("Wilddog.ref",0,0,arguments.length);for(var a=this;null!==a.parent();)a=a.parent();return a};V.prototype.root=V.prototype.root;V.prototype.set=function(a,b){M("Wilddog.set",1,2,arguments.length);jh("Wilddog.set",this.path);bh("Wilddog.set",a,this.path,!1);O("Wilddog.set",2,b,!0);var c=new Q;this.B.cb(this.path,a,null,R(c,b));return c.f};V.prototype.set=V.prototype.set;
V.prototype.update=function(a,b){M("Wilddog.update",1,2,arguments.length);jh("Wilddog.update",this.path);if(da(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;S("Passing an Array to Wilddog.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}eh("Wilddog.update",a,this.path);O("Wilddog.update",2,b,!0);c=new Q;this.B.update(this.path,a,R(c,b));return c.f};V.prototype.update=V.prototype.update;
V.prototype.cb=function(a,b,c){M("Wilddog.setWithPriority",2,3,arguments.length);jh("Wilddog.setWithPriority",this.path);bh("Wilddog.setWithPriority",a,this.path,!1);fh("Wilddog.setWithPriority",2,b);O("Wilddog.setWithPriority",3,c,!0);if(".length"===this.key()||".keys"===this.key())throw"Wilddog.setWithPriority failed: "+this.key()+" is a read-only object.";var d=new Q;this.B.cb(this.path,a,b,R(d,c));return d.f};V.prototype.setWithPriority=V.prototype.cb;
V.prototype.remove=function(a){M("Wilddog.remove",0,1,arguments.length);jh("Wilddog.remove",this.path);O("Wilddog.remove",1,a,!0);this.set(null,a)};V.prototype.remove=V.prototype.remove;
V.prototype.transaction=function(a,b,c){M("Wilddog.transaction",1,3,arguments.length);jh("Wilddog.transaction",this.path);O("Wilddog.transaction",1,a,!1);O("Wilddog.transaction",2,b,!0);if(p(c)&&"boolean"!=typeof c)throw Error(N("Wilddog.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Wilddog.transaction failed: "+this.key()+" is a read-only object.";"undefined"===typeof c&&(c=!0);var d=new Q;fa(b)&&Gd(d.f);li(this.B,this.path,a,function(a,c,g){a?d.g(a):
d.m(new mb(c,g));fa(b)&&b(a,c,g)},c);return d.f};V.prototype.transaction=V.prototype.transaction;V.prototype.he=function(a,b){M("Wilddog.setPriority",1,2,arguments.length);jh("Wilddog.setPriority",this.path);fh("Wilddog.setPriority",1,a);O("Wilddog.setPriority",2,b,!0);var c=new Q;this.B.cb(this.path.C(".priority"),a,null,R(c,b));return c.f};V.prototype.setPriority=V.prototype.he;
V.prototype.push=function(a,b){M("Wilddog.push",0,2,arguments.length);jh("Wilddog.push",this.path);bh("Wilddog.push",a,this.path,!0);O("Wilddog.push",2,b,!0);var c=ci(this.B),d=Cf(c),c=this.C(d);if(null!=a){var e=this,f=c.set(a,b).then(function(){return e.C(d)});c.then=r(f.then,f);c["catch"]=r(f.then,f,void 0);fa(b)&&Gd(f)}return c};V.prototype.push=V.prototype.push;V.prototype.onDisconnect=function(){jh("Wilddog.onDisconnect",this.path);return new Y(this.B,this.path)};V.prototype.onDisconnect=V.prototype.onDisconnect;
V.prototype.V=function(a,b,c){S("WilddogRef.auth() being deprecated. Please use WilddogRef.authWithCustomToken() instead.");M("Wilddog.auth",1,3,arguments.length);kh("Wilddog.auth",a);O("Wilddog.auth",2,b,!0);O("Wilddog.auth",3,b,!0);var d=new Q;zh(self.B.V,a,{},{remember:"none"},R(d,b),c);return d.f};V.prototype.auth=V.prototype.V;V.prototype.sc=function(a){M("Wilddog.unauth",0,1,arguments.length);O("Wilddog.unauth",1,a,!0);var b=new Q;Ah(this.B.V,R(b,a));return b.f};V.prototype.unauth=V.prototype.sc;
V.prototype.Jc=function(){M("Wilddog.getAuth",0,0,arguments.length);return this.B.V.Jc()};V.prototype.getAuth=V.prototype.Jc;V.prototype.Zd=function(a,b){M("Wilddog.onAuth",1,2,arguments.length);O("Wilddog.onAuth",1,a,!1);zb("Wilddog.onAuth",2,b);this.B.V.$a("auth_status",a,b)};V.prototype.onAuth=V.prototype.Zd;V.prototype.Yd=function(a,b){M("Wilddog.offAuth",1,2,arguments.length);O("Wilddog.offAuth",1,a,!1);zb("Wilddog.offAuth",2,b);this.B.V.yb("auth_status",a,b)};V.prototype.offAuth=V.prototype.Yd;
V.prototype.Id=function(a,b,c){M("Wilddog.authWithCustomToken",1,3,arguments.length);kh("Wilddog.authWithCustomToken",a);O("Wilddog.authWithCustomToken",2,b,!0);mh("Wilddog.authWithCustomToken",3,c,!0);var d=new Q;zh(this.B.V,a,{},c||{},R(d,b));return d.f};V.prototype.authWithCustomToken=V.prototype.Id;
V.prototype.Jd=function(a,b,c){M("Wilddog.authWithOAuthPopup",2,3,arguments.length);lh("Wilddog.authWithOAuthPopup",1,a);O("Wilddog.authWithOAuthPopup",2,b,!1);mh("Wilddog.authWithOAuthPopup",3,c,!0);var d=new Q;Eh(this.B.V,a,c,R(d,b));return d.f};V.prototype.authWithOAuthPopup=V.prototype.Jd;
V.prototype.Kd=function(a,b,c){M("Wilddog.authWithOAuthRedirect",2,3,arguments.length);lh("Wilddog.authWithOAuthRedirect",1,a);O("Wilddog.authWithOAuthRedirect",2,b,!1);mh("Wilddog.authWithOAuthRedirect",3,c,!0);var d=new Q,e=this.B.V,f=R(d,b);Ch(e);var g=[ec],k=xb(c);"anonymous"===a||"wilddog"===a?T(f,J("TRANSPORT_UNAVAILABLE")):(L.set("redirect_client_options",k.Wb),Dh(e,g,"/auth/"+a,k,f));return d.f};V.prototype.authWithOAuthRedirect=V.prototype.Kd;
V.prototype.Ld=function(a,b,c,d){M("Wilddog.authWithOAuthToken",3,4,arguments.length);lh("Wilddog.authWithOAuthToken",1,a);O("Wilddog.authWithOAuthToken",3,c,!1);mh("Wilddog.authWithOAuthToken",4,d,!0);var e=new Q;q(b)?(lh("Wilddog.authWithOAuthToken",2,b),Bh(this.B.V,a+"/token",{access_token:b},d,R(e,c))):(mh("Wilddog.authWithOAuthToken",2,b,!1),Bh(this.B.V,a+"/token",b,d,R(e,c)));return e.f};V.prototype.authWithOAuthToken=V.prototype.Ld;
V.prototype.Hd=function(a,b){M("Wilddog.authAnonymously",0,2,arguments.length);O("Wilddog.authAnonymously",1,a,!0);mh("Wilddog.authAnonymously",2,b,!0);var c=new Q;Bh(this.B.V,"anonymous",{},b,R(c,a));return c.f};V.prototype.authAnonymously=V.prototype.Hd;
V.prototype.Md=function(a,b,c){M("Wilddog.authWithPassword",1,3,arguments.length);mh("Wilddog.authWithPassword",1,a,!1);nh("Wilddog.authWithPassword",a,"email");nh("Wilddog.authWithPassword",a,"password");O("Wilddog.authAnonymously",2,b,!0);mh("Wilddog.authAnonymously",3,c,!0);var d=new Q;Bh(this.B.V,"password",a,c,R(d,b));return d.f};V.prototype.authWithPassword=V.prototype.Md;
V.prototype.Fc=function(a,b){M("Wilddog.createUser",1,2,arguments.length);mh("Wilddog.createUser",1,a,!1);nh("Wilddog.createUser",a,"email");nh("Wilddog.createUser",a,"password");O("Wilddog.createUser",2,b,!0);var c=new Q;this.B.V.Fc(a,R(c,b));return c.f};V.prototype.createUser=V.prototype.Fc;
V.prototype.Uc=function(a,b){M("Wilddog.removeUser",1,2,arguments.length);mh("Wilddog.removeUser",1,a,!1);nh("Wilddog.removeUser",a,"email");nh("Wilddog.removeUser",a,"password");O("Wilddog.removeUser",2,b,!0);var c=new Q;this.B.V.Uc(a,R(c,b));return c.f};V.prototype.removeUser=V.prototype.Uc;
V.prototype.Cc=function(a,b){M("Wilddog.changePassword",1,2,arguments.length);mh("Wilddog.changePassword",1,a,!1);nh("Wilddog.changePassword",a,"email");nh("Wilddog.changePassword",a,"oldPassword");nh("Wilddog.changePassword",a,"newPassword");O("Wilddog.changePassword",2,b,!0);var c=new Q;this.B.V.Cc(a,R(c,b));return c.f};V.prototype.changePassword=V.prototype.Cc;
V.prototype.Bc=function(a,b){M("Wilddog.changeEmail",1,2,arguments.length);mh("Wilddog.changeEmail",1,a,!1);nh("Wilddog.changeEmail",a,"oldEmail");nh("Wilddog.changeEmail",a,"newEmail");nh("Wilddog.changeEmail",a,"password");O("Wilddog.changeEmail",2,b,!0);var c=new Q;this.B.V.Bc(a,R(c,b));return c.f};V.prototype.changeEmail=V.prototype.Bc;
V.prototype.Wc=function(a,b){M("Wilddog.resetPassword",1,2,arguments.length);mh("Wilddog.resetPassword",1,a,!1);nh("Wilddog.resetPassword",a,"email");O("Wilddog.resetPassword",2,b,!0);var c=new Q;this.B.V.Wc(a,R(c,b));return c.f};V.prototype.resetPassword=V.prototype.Wc;
function Ud(a,b){D(!b||!0===a||!1===a,"Can't turn on custom loggers persistently.");!0===a?("undefined"!==typeof console&&("function"===typeof console.log?db=r(console.log,console):"object"===typeof console.log&&(db=function(a){console.log(a)})),b&&L.set("logging_enabled",!0)):a?db=a:(db=null,L.remove("logging_enabled"))}var Od=CLIENT_VERSION;V.goOffline=function(){M("Wilddog.goOffline",0,0,arguments.length);ui.Va().Za()};V.goOnline=function(){M("Wilddog.goOnline",0,0,arguments.length);ui.Va().Db()};
V.enableLogging=Ud;V.ServerValue={TIMESTAMP:{".sv":"timestamp"}};V.SDK_VERSION=Od;V.INTERNAL=X;V.TEST_ACCESS=Z;1!=NODE_CLIENT?("object"==typeof module&&module.exports&&(module.exports=V),"function"==typeof define&&define.amd&&define("Wilddog",[],function(){return V}),window?window.Wilddog=V:WorkerGlobalScope&&self&&(self.Wilddog=V)):module.exports=V;
};ns.wrapper(ns.goog,ns.wd)})({goog:{},wd:{}})
